{"version":3,"file":"yamba.min.js","sources":["../concat/app.js"],"names":["addTag","name","attributes","sync","attrName","el","document","createElement","setAttribute","write","outerHTML","headEl","appendChild","node","n","h","div","innerHTML","serializeFormPostData","transformRequest","data","getHeaders","headers","serializeData","angular","isObject","toString","buffer","hasOwnProperty","value","push","encodeURIComponent","source","join","replace","yamba","App","appname","Array","prototype","merge","mergeArr","isArray","this","arr","i","length","Number","num_format","decimals","dec_point","thousands_sep","number","isFinite","prec","Math","abs","sep","dec","s","toFixedFix","k","pow","round","toFixed","split","getIndexByKeyVal","key","val","input","indx","chunk","size","preserve_keys","x","p","c","l","Object","call","module","cover","id","Notifier","currentTimer","show","message","options","timer","notElem","$","opts","extend","display","css","html","clearTimeout","setTimeout","hide","filter","time_diff","uc_first","date_string","label","ucfirst","image","test","type","String","str","f","charAt","toUpperCase","substr","string","limit","substring","factory","$http","$location","Upload","CookieServices","_UserCookie","getSession","get","_getToken","_user","token","isLogin","_request","url","method","successCb","errorCb","services_url","param","Content-Type","success","response","error","path","_appendDataToUrl","paramStr","put","post","delete","upload","file","filename","params","fields","fileFormDataName","status","config","BaseServices","boxes","getBox","callback","self","getUserBox","circle_id","editBox","title","addRemoveUserInBox","user_id","addUserToBox","createComment","fetchComments","deleteComment","comment_id","isUndefined","$cookies","$cookieStore","_concatSessionId","session_id","remove","clean","forEach","v","UserServices","$window","$timeout","$stateParams","FavoUser","items","busy","after","nextPage","lines","width","radius","corners","rotate","direction","color","speed","trail","shadow","hwaccel","className","zIndex","top","left","target","getElementById","spinner","Spinner","spin","console","log","username","profile","User","offset","items_count","bind","stop","relatedFavos","project_id","fetchFavoList","addProjectToFavo","createFavo","fetchSpecificFavo","fetchFavoPost","fetchFavoUser","classes","relatedPost","getActivityFeeds","getFeaturedFeeds","getFeedByProjectId","getFeedsByHashtag","getFeedsTrending","creation_date","getPostMedia","getMyPost","getMyLikePost","followUnfollow","checkFollowStatus","subject_id","fetchFollowers","confirmFollowRequest","ignoreFollowRequest","followStatus","is_followed","pending","parseInt","Follow","Hashtag","followUnfollowHashtag","getPostHashtag","fetchHashtag","getHashtagInfo","text","likeUnliked","generalNotification","requestNotification","myPost","getPostByProjectId","uplaodNewPost","description","hashtags","searchable","allow_downloadable_original","privacy","auth_comment","searchHashtag","searchFeed","searchUser","searchFavo","updateGeneralInfo","getTimezone","utc","$q","getLoginUser","login","password","userKey","identity","copy","register","logout","profile2","deferred","defer","resolve","reason","reject","promise","directive","$sce","restrict","scope","ybHtmlUnsafe","template","link","$scope","updateHtml","trustedHtml","trustAsHtml","$watch","element","attr","charLength","container_counter","ybTextboxCounterContainer","charMaxLength","ybTextBoxLimit","unbind","favos","templateUrl","LikeServices","ModalService","view","addCollection","showModal","controller","inputs","then","modal","close","likeFeed","scope_ctr","queryElement","querySelectorAll","find","islike","addClass","$parent","feeds","removeClass","commentModal","deleteFeed","feed_options","userInfo","user","$compile","FeedServices","HashtagServices","$document","$state","FavoServices","pattern","ctr","mypost","mylikepost","activity","featured","hashtag","trending","favofeed","scroll","buildTemplate","current_length","request","getPattern","getHashtagColor","image_color_data","hashtag_color","R","G","B","cls","hashtag_background_color","Image_color","cb","Posts","my_likes","Activity_Feed","Favo_Feed","likePost","feedFigureTpl","feedTemplateCompile","dFilter","fetchFeeds","responseFeeds","append","masonry","columnWidth","itemSelector","window","scrollBottom","height","scrollTop","is","FollowServices","layout","confirm","project","render","embedded","urlRegex","createFrame","isFirefox","browser","navigator","userAgent","toLowerCase","indexOf","fetchMedia","embed","match","content","Embedded","Media","projects","follow","unfollow","group","followButtonFunction","pending_approval","Constant","BoxServices","Box","addBox","collections","fileReaderSupported","FileReader","FileAPI","html5","generateThumb","fileReader","readAsDataURL","onload","e","dataUrl","result","form","$valid","collection","category","selected_collection","favcircle_id","addProject","repostPost","alert","PostServices","current_user","resetVars","newPostError","upload_type","closeModal","files","showUploadForm","nextNewPostForm","refineHashtag","addHash","addComma","hashtag_counts","tmp_hashtags","hashtagCheker","newPostSubmit","searchKeyword","closeSearchModal","go","keyword","search","showLeftMenuCanvas","leftMenuCanvas","mainAppCanvas","hasClass","showTrendingModal","showSearchForm","focus","showNewPostModal","current_filter","loadingTrend","trendOffset","closeTrendingModal","changeTrending","showTrending","showMoreTrending","activity_feed_filter","box_id","profile_cover","user_data","random_cover","my_profile","follow_status","new_cover","cover_photo","CommentServices","hasMoreComment","comments","current_page","loadComments","page","total_pager","loadMoreComment","comment_form_processing","submitComment","body","comment","count","favo","favoFilter","favo_id","Favo","follower_id","FollowerFactory","current_id","follows","follow_service","fetch_method","group_index","box_users","edit_group","current_box","box_name","saveGroupName","index","splice","filterHashtag","hashtag_info","headerBg","afterFinish","storage_path","hashtagFollow","tag_id","filterUser","authenticate","errorMsg","NotificationServices","notifications","currentOffset","notification_type","getNotification","post_data","isOwner","owner","showModalBox","status_string","unfollowFollow","Users","is_liked","sharePost","related_favos","RelatedFavo","related_projects","RelatedPost","addGroup","SearchServices","users","SettingsServices","StaticDataServices","settings","timezones","input_disabled","email","displayname","timezone","pass","new_password","confirm_password","errors","locale","field","changePassword"],"mappings":"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","sourcesContent":["var yamba = {\n\tApp : null,\n\tappname : \"yamba\",\n\n};\n\nfunction addTag(name, attributes, sync) {\n    var el = document.createElement(name), attrName;\n    for (attrName in attributes) {\n \t   el.setAttribute(attrName, attributes[attrName]);\n    }\n    sync ? document.write(outerHTML(el)) : headEl.appendChild(el);\n};\n\nfunction outerHTML(node){\n        // if IE, Chrome take the internal method otherwise build one\n    return node.outerHTML || (\n        function(n){\n            var div = document.createElement('div'), h;\n            div.appendChild(n);\n            h = div.innerHTML;\n            div = null;\n            return h;\n   \t \t})(node);\n};\n\nArray.prototype.merge = function( mergeArr ){\n    if( !angular.isArray( mergeArr ) ) return this;\n    var arr = this||[];\n    for( var i = 0; i < mergeArr.length; i++ ){\n        arr.push( mergeArr[ i ] ); \n    }\n    return arr;\n}\n\nNumber.prototype.num_format = function( decimals, dec_point, thousands_sep ){\n    number = (this + '')\n    .replace(/[^0-9+\\-Ee.]/g, '');\n    var n = !isFinite(+number) ? 0 : +number,\n    prec = !isFinite(+decimals) ? 0 : Math.abs(decimals),\n    sep = (typeof thousands_sep === 'undefined') ? ',' : thousands_sep,\n    dec = (typeof dec_point === 'undefined') ? '.' : dec_point,\n    s = '',\n    toFixedFix = function(n, prec) {\n      var k = Math.pow(10, prec);\n      return '' + (Math.round(n * k) / k)\n        .toFixed(prec);\n    };\n    // Fix for IE parseFloat(0.55).toFixed(0) = 0;\n    s = (prec ? toFixedFix(n, prec) : '' + Math.round(n))\n    .split('.');\n    if (s[0].length > 3) {\n    s[0] = s[0].replace(/\\B(?=(?:\\d{3})+(?!\\d))/g, sep);\n    }\n    if ((s[1] || '')\n    .length < prec) {\n    s[1] = s[1] || '';\n    s[1] += new Array(prec - s[1].length + 1)\n      .join('0');\n    }\n    return s.join(dec);     \n}\n\nArray.prototype.getIndexByKeyVal = function( key, val ){\n    var input = this;\n    var indx = null;\n    for( var i = 0; i < input.length; i++ ){\n        if( input[ i ][ key ] == val ){\n            indx = i;\n            break;\n        }\n    }\n    return indx;\n}\n\n\nArray.prototype.chunk = function array_chunk(size, preserve_keys) {\n    var input = this;\n    var x, p = '',\n    i = 0,\n    c = -1,\n    l = input.length || 0,\n    n = [];\n    if (size < 1) {\n        return null;\n    }\n    if (Object.prototype.toString.call(input) === '[object Array]') {\n        if (preserve_keys) {\n            while (i < l) {\n                (x = i % size) ? n[c][i] = input[i] : n[++c] = {}, n[c][i] = input[i];\n                i++;\n            }\n        } else {\n            while (i < l) {\n                (x = i % size) ? n[c][x] = input[i] : n[++c] = [input[i]];\n                i++;\n            }\n        }\n    } else {\n        if (preserve_keys) {\n            for (p in input) {\n                if (input.hasOwnProperty(p)) {\n                    (x = i % size) ? n[c][p] = input[p] : n[++c] = {}, n[c][p] = input[p];\n                    i++;\n                }\n            }\n        } else {\n            for (p in input) {\n                if (input.hasOwnProperty(p)) {\n                    (x = i % size) ? n[c][x] = input[p] : n[++c] = [input[p]];\n                    i++;\n                }\n            }\n        }\n    }\n  return n;\n}\n\nyamba.App = angular.module( yamba.appname, [ \"ngRoute\",\"ngCookies\", \"ui.router\", \"ngFileUpload\" ,\"infinite-scroll\", \"angularModalService\"] );\n\nyamba.App.value('profile_cover',{\n    cover : null,\n    id : 0\n});\n\nyamba.App.value('follower_id',0);\n\nyamba.App.value('following_id',0);\n\nvar Notifier = {\n\n    currentTimer : null,\n\n    show : function( message, options, timer ){\n        var notElem = $( \"#notification\" );\n        if( notElem.length > 0 ){\n\n            var opts = angular.extend( {\n                display : 'block'\n            }, options||{} );\n\n            notElem.css( opts ).html( \"<h1>\" + message + \"</h1>\" ); \n\n            if( typeof timer == \"number\" ){\n                if( Notifier.currentTimer != null ){\n                    clearTimeout( Notifier.currentTimer );\n                }\n\n                Notifier.currentTimer = setTimeout( function(){ \n                    Notifier.hide();\n                }, timer ); \n            }\n\n        }\n    },\n\n    hide : function(){\n        var notElem = $( \"#notification\" );\n\n        if( notElem.length > 0 ){\n            notElem.css( {\n                display : 'none'\n            } ).html( '' );\n        }\n    }\n\n}\n\r\nyamba.App.filter( \"ybDisplayTimeDiff\", function( ) {\n\n\treturn function( time_diff, uc_first ){\n\t\tuc_first = uc_first||false;\n\n\t\tif( angular.isArray( time_diff ) ) return \"now\";\n\n\t\tvar date_string = \"\";\n\n\t\tfor( var key in time_diff ){\n\t\t\tlabel = key;\n\t\t\tif(uc_first){\n\t\t\t\tlabel = key.toString().ucfirst();\n\t\t\t}\n\n\t\t\tdate_string += time_diff[ key ] + \" \" + label + \" \"; \n\t\t}\n\n\t\tif( date_string == \"\" ){\n\t\t\tdate_string = \"now\";\n\t\t}\n\n\t\treturn date_string; \n\t}\n\n} );\n\r\nyamba.App.filter( \"ybImagePath\", function( ) {\n\n\treturn function( image ){\n\n\t\tif( typeof image == \"undefined\" || image == null || image == 'null'){\n\t\t\treturn \"\"; \t\n\t\t}\n\t\tif( /services/gi.test( image.toString() ) ){\n\t\t\treturn \"http://yamba.rocks/\" + image;\n\t\t}\n\t\telse{\n\t\t\treturn \"http://yamba.rocks/services/\" + image;\n\t\t}\n\t}\n\n} );\r\nyamba.App.filter( \"ybMediaType\", function( ) {\n\n\treturn function( type ){\n\n\t\tif( type == \"direct\" || type == \"youtube\" ){\n\t\t\treturn \"Video\"\n\t\t}\n\t\telse if( type == \"null\" ){\n\t\t\treturn \"Image\"\n\t\t}\n\t\telse{\n\t\t\treturn \"Type Not Found\"\n\t\t}\n\n\t}\n\n} );\r\n\r\nString.prototype.ucfirst = function() {\n  str = '' + this;\n  var f = str.charAt(0)\n    .toUpperCase();\n  return f + str.substr(1);\n}\n\nyamba.App.filter( \"ybStringLimit\", function( ) {\n\n\treturn function( string, limit ){\n\n\t\tif( string.length > limit ){\n\t\t\treturn string.substring( 0, limit ) + \"...\";\n\t\t}\t\n\t\treturn string;\n\t}\n\n} );\n\r\nyamba.App.factory( \"BaseServices\", [ \"$http\", \"$location\", \"Upload\", \"CookieServices\", \n\t\t\t\t\t\t\t\t\tfunction( $http, $location, Upload, CookieServices ) {\n\n\treturn {\n\n\t\t_UserCookie : \"USER\",\n\n\t\tgetSession : function( key ){\n\t\t\treturn CookieServices.get( key );\n\t\t},\n\n\n\t\t_getToken : function(){\n\t\t\tvar _user = CookieServices.get( this._UserCookie );\n\t\t\tvar token = \"\";\n\t\t\tif( typeof _user != \"undefined\" && typeof _user.token != \"undefined\" ){\n\t\t\t\ttoken = _user.token;\n\t\t\t}\n\n\t\t\treturn token;\n\n\t\t},\n\n\n\t\tisLogin : function(){\n\t\t\tvar _user = CookieServices.get( this._UserCookie );\n\n\t\t\tif( typeof _user != \"undefined\" && _user.token != \"undefined\" && _user.id != \"undefined\" ){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\n\n\t\t_request : function( url, method, data, successCb, errorCb ){\n\t\t\t//url = encodeURIComponent( url );\n\t\t\tvar token = this._getToken();\n\t\t\tdata = angular.extend( {\n\t\t\t\ttoken : token,\t\n\t\t\t}, data );\n\n\t\t\t$http( {\n\t\t\t\turl : services_url + url,\n\t\t\t\tmethod : method,\n\t\t\t\tdata :  $.param( data ),\n\t\t\t\theaders : {\n\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8'\n\t\t\t\t}\n\t\t\t} ).success( function( response ) {\n\n\t\t\t\tif( typeof response.error != \"undefined\" && ( response.error == \"Unauthorized 101\" || response.error == \"Invalid token\" ) ){\n\t\t\t\t\t// redirect to login \n\t\t\t\t\t$location.path( \"login\" );\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tsuccessCb( response );\n\t\t\t\t}\n\t\t\t}, function( ) {\n\t\t\t\tif( typeof errorCb == \"function\" ){\n\t\t\t\t\terrorCb();\n\t\t\t\t}\n\t\t\t} );\n\n\t\t},\n\n\t\t_appendDataToUrl : function( url, data ){\n\t\t\tvar paramStr = \"\";\n\t\t\tfor( var key in data ){\n\t\t\t\tif( paramStr != \"\" )\n\t\t\t\t\tparamStr += \"&\";\n\t\t\t\tparamStr += key + \"=\" + data[ key ];\n\t\t\t}\n\t\t\turl += \"?token=\" + this._getToken() + \"&\" + paramStr;\n\t\t\treturn url;\n\t\t},\n\n\t\tput : function( url, data, successCb, errorCb ){\n\t\t\turl = this._appendDataToUrl( url, data );\n\t\t\tthis._request( url, \"PUT\", data, successCb, errorCb );\n\t\t},\n\n\t\tget : function( url, successCb, errorCb ){\n\t\t\tthis._request( url, \"GET\", null, successCb, errorCb );\n\t\t},\n\n\t\tpost : function( url, data, successCb, errorCb ){\n\t\t\tthis._request( url, \"POST\", data, successCb, errorCb );\n\t\t},\n\n\t\tdelete : function( url, successCb, errorCb ){\n\t\t\tthis._request( url, \"DELETE\", null, successCb, errorCb );\n\t\t},\n\n\t\tupload : function( url, file, filename, params, successCb, errorCb ){\n\t\t\t//url = encodeURIComponent( url );\n\t\t\tvar token = this._getToken();\n\t\t\tdata = angular.extend( {\n\t\t\t\ttoken : token,\t\n\t\t\t}, params );\n\n\t\t\tUpload.upload( {\n\t\t\t\turl : services_url + url,\n\t\t\t\t//url : 'http://localhost/ngyamba/filepost.php',\n\t\t\t\tfields : data,\n\t\t\t\tfile : file,\n\t\t\t\tfileFormDataName : filename\n\t\t\t} )\n\t\t\t.success( function ( data, status, headers, config ) {\n\t\t\t\tsuccessCb( data, status, headers, config )\n            });\n\t\t}\n\n\t}\n\n} ] )\r\nyamba.App.factory( \"BoxServices\", [ \"CookieServices\", \"BaseServices\", function( CookieServices, BaseServices ) {\n\n\treturn {\n\t\tboxes : [],\n\n\t\tgetBox : function( callback ){\n\t\t\tvar self = this;\n\t\t\tif( this.boxes.length != 0 ){\n\t\t\t\tcallback( this.boxes );\n\t\t\t}else{\n\t\t\t\tBaseServices.post( 'api/box', {\n\t\t\t\t\tmethod : 'get'\n\t\t\t\t}, function( response ) {\n\t\t\t\t\tself.boxes = response;\n\t\t\t\t\tcallback( response );\n\t\t\t\t} )\n\t\t\t}\n\t\t},\n\n\t\tgetUserBox : function( params, callback ){\n\t\t\tvar filter = angular.extend( {\n\t\t\t\tmethod : 'getUsers',\n\t\t\t\tcircle_id : 0 \n\t\t\t}, params || {} )\n\n\t\t\tBaseServices.post( \"api/box\", filter, callback );\n\t\t},\n\n\t\teditBox : function( params, callback ){\n\t\t\tvar filter = angular.extend( {\n\t\t\t\tmethod : 'editBox',\n\t\t\t\tcircle_id : 0, \n\t\t\t\ttitle : \"\"\n\t\t\t}, params || {} )\n\n\t\t\tBaseServices.post( \"api/box\", filter, callback );\n\t\t},\t\n\n\t\taddRemoveUserInBox : function( params, callback ){\n\t\t\tvar filter = angular.extend( {\n\t\t\t\tmethod : 'addRemoveBox',\n\t\t\t\tcircle_id : 0,\n\t\t\t\tuser_id : 0 \n\t\t\t}, params || {} )\n\n\t\t\tBaseServices.post( \"api/box\", filter, callback );\n\t\t},\n\n\t\taddUserToBox : function( circle_id, user_id, callback ){\n\t\t\tBaseServices.post( \"api/box\", {\n\t\t\t\tcircle_id : circle_id,\n\t\t\t\tuser_id : user_id,\n\t\t\t\tmethod : \"addRemoveBox\"\n\t\t\t}, callback )\n\t\t}\n\n\t}\n\n} ] );\r\nyamba.App.factory( \"CommentServices\", [ \"CookieServices\", \"BaseServices\", function( CookieServices, BaseServices ) {\n\n\treturn {\n\n\t\tcreateComment : function( data, successCb, errorCb ){\n\t\t\tif( !angular.isObject( data ) )\n\t\t\t\treturn;\n\t\t\tdata.method = \"createComment\";\n\t\t\tBaseServices.post( \"api-2/comment\", data, successCb, errorCb )\n\t\t},\n\n\t\tfetchComments: function( data, successCb, errorCb ){\n\t\t\tif( !angular.isObject( data ) )\n\t\t\t\treturn;\n\t\t\tdata.method = \"fetchComment\";\n\t\t\tBaseServices.post( \"api-2/comment\", data, successCb, errorCb );\n\t\t},\n\n\t\tdeleteComment : function( comment_id, successCb, errorCb ){\n\t\t\tif( angular.isUndefined( comment_id ) )\t\n\t\t\t\treturn;\n\t\t\tBaseServices.delete( \"api/comment?comment_id=\" + comment_id, successCb, errorCb );\n\t\t}\n\n\t}\n\n} ] );\r\nyamba.App.factory( \"CookieServices\", [ \"$cookies\", \"$cookieStore\", function( $cookies, $cookieStore ) {\n\n\treturn {\n\n\t\t_concatSessionId : function( key ){\n\t\t\treturn typeof session_id == \"undefined\" ? key : session_id + '_' + key;\n\t\t},\n\n\t\tget : function( key ) {\n\t\t\tkey = this._concatSessionId( key );\n\t\t\treturn $cookieStore.get( key );\n\t\t},\n\n\t\tput : function( key, value ){\n\t\t\tkey = this._concatSessionId( key );\n\t\t\t$cookieStore.put( key, value );\n\t\t},\n\n\t\tremove : function( key ){\n\t\t\tkey = this._concatSessionId( key );\n\t\t\t$cookieStore.remove( key );\t\n\t\t},\n\n\t\tclean : function(){\n\t\t\tangular.forEach( $cookies, function ( v, k ) {\n\t\t\t    $cookieStore.remove( k );\n\t\t\t} );\n\t\t}\n\n\t}\n\n} ] )\r\nyamba.App.factory( \"FavoServices\", [ \"CookieServices\", \"BaseServices\",'UserServices','$window','$timeout','$stateParams', function( CookieServices, BaseServices,UserServices,$window, $timeout,$stateParams ) {\n\n\tvar FavoUser = function() {\n\t    this.items = [];\n\t    this.busy = false;\n\t    this.after = 0;\n  \t};\n\n  \tFavoUser.prototype.nextPage = function() {\n  \t\tvar opts = {\n\t\t\tlines: 13,\n\t\t\tlength: 0,\n\t\t\twidth: 4,\n\t\t\tradius: 51,\n\t\t\tcorners: 1,\n\t\t\trotate: 52,\n\t\t\tdirection: 1,\n\t\t\tcolor: '#000',\n\t\t\tspeed: 1.3,\n\t\t\ttrail: 25,\n\t\t\tshadow: false,\n\t\t\thwaccel: false,\n\t\t\tclassName: 'spinner',\n\t\t\tzIndex: 2e9,\n\t\t\ttop: '50%',\n\t\t\tleft: '50%'\n\t\t};\n\t\tvar target = document.getElementById('thespinner');\n\n\t    if (this.busy) return;\n\t    this.busy = true;\n\t    \n\t    var spinner = new $window.Spinner(opts).spin();\n\t\ttarget.appendChild(spinner.el);\n\t\tvar user_id = 0;\n\t\tconsole.log( $stateParams.username);\n\n\t\tUserServices.profile(\n\t\t\t{\n\t\t\t\tmethod : 'fetchByUsername',\n\t    \t\tusername : $stateParams.username\n\t\t\t},\n\t\t\tfunction(response){\n\t\t\t\tconsole.log(response);\n\t\t\t\tuser_id = response.data.User.user_id;\n\t\t\t\t\n\t\t\t\tBaseServices.post( \n\t\t\t   \t\t\"/api/favo\", \n\t\t\t   \t\t{\n\t\t\t\t\t\tmethod : 'fetchUserFavo',\n\t\t\t\t\t\tuser_id : response.data.User.user_id,\n\t\t\t\t\t\toffset : this.after\n\t\t\t\t\t},\n\t\t\t\t\tfunction(data) {\n\t\t\t\t      \tvar items = data.data;\n\t\t\t\t      \tvar items_count = items.length;\n\t\t\t\t      \tconsole.log(items.length);\n\t\t\t\t      \tfor (var i = 0; i < items_count; i++) {\n\t\t\t\t        \tthis.items.push(items[i]);\n\t\t\t\t      \t}\n\t\t\t\t      \tthis.after++;\n\t\t\t\t      \t\n\t\t\t\t      \tthis.busy = false;\n\t\t\t\t      \tif(items_count < 10) {\n\t\t\t\t      \t\tthis.busy = true;\n\t\t\t\t      \t}\n\t\t\t    \t}.bind(this)\n\t\t\t    );\n\t\t\t}.bind(this)\n\t    );\n\n      \t$timeout( function() {\n\t    \tspinner.stop();\n\t    }, 500 );\n  \t};\n\n\treturn {\n\n\t\trelatedFavos : function( project_id, successCb ){\n\t\t\tvar filter = { project_id : project_id }\n\t\t\tBaseServices.post( \"api-2/relatedfavo\", filter, successCb );\n\t\t},\n\n\t\tfetchFavoList : function( params, successCb ){\n\t\t\tvar filter = angular.extend( {\n\t\t\t\tmethod : \"fetch\"\n\t\t\t}, params || {} );\n\t\t\tBaseServices.post( \"api/favo\", filter, successCb );\n\t\t},\n\n\t\taddProjectToFavo : function( params, successCb ){\n\t\t\tvar filter = angular.extend( {\n\t\t\t\tmethod : \"addToFavo\"\n\t\t\t}, params || {} );\n\t\t\tBaseServices.post( \"api/favo\", filter, successCb );\n\t\t},\n\n\t\tcreateFavo : function( file, filename, params, successCb ){\n\t\t\tvar filter = angular.extend( {\n\t\t\t\tmethod : \"create\"\n\t\t\t}, params || {} );\n\t\t\tBaseServices.upload( \"api/favo\", file, filename, filter, successCb );\n\t\t},\n\n\t\tfetchSpecificFavo : function( params, successCb ){\n\t\t\tvar filter = angular.extend( {\n\t\t\t\tmethod : \"fetchAFavo\",\n\t\t\t}, params || {} );\n\t\t\tBaseServices.post( \"api/favo\", filter, successCb );\n\t\t},\n\n\t\tfetchFavoPost : function( params, successCb ){\n\t\t\tvar filter = angular.extend( {\n\t\t\t\tmethod : \"fetchPosts\",\n\t\t\t\toffset : '0'\n\t\t\t}, params || {} );\n\t\t\tBaseServices.post( \"api/favo\", filter, successCb );\n\t\t},\n\n\t\tfetchFavoUser: FavoUser\n\t}\n\n} ] );\r\nyamba.App.factory( \"FeedServices\", [ \"CookieServices\", \"BaseServices\", function( CookieServices, BaseServices ) {\n\n\treturn {\n\n\t\tclasses : [ \"w1\", \"w2\", \"w3\" ],\n\n\t\trelatedPost : function( project_id, callback ){\n\t\t\tvar filter = { project_id : project_id }\n\t\t\tBaseServices.post( \"api-2/relatedpost\", filter, callback );\n\t\t},\n\n\t\tgetActivityFeeds : function( filter, callback ){\n\t\t\tvar filter = angular.extend( { \n\t\t\t\toffset : 0\n\t\t\t}, filter );\n\t\t\tBaseServices.post( \"api/activityfeed\", filter, callback )\n\n\t\t}, \n\n\t\tgetFeaturedFeeds : function( filter, callback ){\n\t\t\tvar filter = angular.extend( { \n\t\t\t\toffset : 0\n\t\t\t}, filter );\n\t\t\tBaseServices.post( \"api/featured\", filter, callback )\n\t\t},\n\n\t\tgetFeedByProjectId : function( project_id, callback ){\n\n\t\t\tBaseServices.post( \"api/specificprofilepost\", {\n\t\t\t\tproject_id : project_id\t\n\t\t\t}, callback );\n\n\t\t},\n\n\t\tgetFeedsByHashtag : function( filter, callback ){\n\t\t\tvar filter = angular.extend( { \n\t\t\t\toffset : 0,\n\t\t\t\tmethod : 'fetchByHashtagName'\n\t\t\t}, filter );\n\t\t\tBaseServices.post( \"api-2/feedsearch\", filter, callback )\n\t\t}, \n\n\t\tgetFeedsTrending : function( filter, callback ){\n\t\t\tvar filter = angular.extend( { \n\t\t\t\toffset : 0,\n\t\t\t\tmethod : 'fetchTrending',\n\t\t\t\tcreation_date : 'today'\n\t\t\t}, filter );\n\t\t\tBaseServices.post( \"api/explore\", filter, callback )\n\n\t\t},\n\n\t\tgetPostMedia : function( params, callback ){\n\n\t\t\tvar filter = angular.extend( { \n\t\t\t\tmethod : 'fetchEmbedded',\n\t\t\t\tproject_id : 0\t\n\t\t\t}, params)\t\n\t\t\tBaseServices.post( \"api-2/project\", filter, callback )\n\t\t},\n\n\t\tgetMyPost : function( params, callback ){\n\n\t\t\tvar filter = angular.extend( { \n\t\t\t\toffset  : 0\t\n\t\t\t}, params)\t\n\t\t\t// BaseServices.post( \"api/myposts\", filter, callback );\n\t\t\tBaseServices.post( \"api/userprofileposts\", filter, callback );\n\n\t\t},\n\n\t\tgetMyLikePost : function( params, callback ){\n\n\t\t\tvar filter = angular.extend( { \n\t\t\t\toffset  : 0\t\n\t\t\t}, params)\t\n\t\t\tBaseServices.post( \"api/getlikesposts\", filter, callback );\n\n\t\t}\n\n\n\t}\n\n\n} ] );\n\n\r\nyamba.App.factory( \"FollowServices\", [ \"CookieServices\", \"BaseServices\",'$window','$timeout', function( CookieServices, BaseServices, $window, $timeout ) {\n\n\treturn {\n\n\t\tfollowUnfollow : function( user_id, callback ){\n\n\t\t\tBaseServices.post( \"/api/follow\", {\n\t\t\t\tuser_id : user_id\n\t\t\t}, callback )\n\n\t\t},\n\n\t\tcheckFollowStatus : function( user_id, callback ){\n\n\t\t\tBaseServices.post( \"/api/follow\", {\n\t\t\t\tmethod : \"checkFollowStatus\",\n\t\t\t\tsubject_id : user_id\n\t\t\t}, callback )\n\n\t\t},\n\n\t\tfetchFollowers : function( data, callback ){\n\n\t\t\tBaseServices.post( \"/api/follow\", {\n\t\t\t\tmethod : data.filter,\n\t\t\t\tsubject_id : data.user_id,\n\t\t\t\toffset : data.offset\n\t\t\t}, callback )\n\n\t\t},\n\n\t\tconfirmFollowRequest : function( subject_id, callback ){\n\n\t\t\tBaseServices.post( \"api/follow\", {\n\t\t\t\tmethod : 'confirm',\n\t\t\t\tsubject_id : subject_id\n\t\t\t}, callback );\n\n\t\t},\n\n\t\tignoreFollowRequest : function( subject_id, callback ){\n\n\t\t\tBaseServices.post( \"api/follow\", {\n\t\t\t\tmethod : 'ignore',\n\t\t\t\tsubject_id : subject_id\n\t\t\t}, callback );\n\n\t\t},\n\n\t\t// fetchFollowers : Follow,\n\n\t\tfollowStatus : function( is_followed, pending ){\n\t\t\tis_followed = parseInt( is_followed )\n\t\t\tpending = parseInt( pending );\n\n\t\t\tif( is_followed == 0 && pending == 0 ){\n\t\t\t\treturn \"Follow\";\n\t\t\t}\n\t\t\telse if( is_followed == 0 && pending == 1 ){\n\t\t\t\treturn \"For Approval\";\n\t\t\t}\n\t\t\telse if( is_followed == 1 && pending == 0 ){\n\t\t\t\treturn \"Following\";\t\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn \"Follow status not found.\";\n\t\t\t}\n\n\t\t} \n\n\n\t}\n\n} ] );\r\nyamba.App.factory( \"FollowerFactory\", [ \"CookieServices\", \"BaseServices\",'UserServices','$window','$timeout','$stateParams', function( CookieServices, BaseServices,UserServices, $window, $timeout,$stateParams ) {\n\tvar Follow = function() {\n\t    this.items = [];\n\t    this.busy = false;\n\t    this.after = 0;\n  \t};\n\n  \tFollow.prototype.nextPage = function(filter) {\n  \t\tvar opts = {\n\t\t\tlines: 13,\n\t\t\tlength: 0,\n\t\t\twidth: 4,\n\t\t\tradius: 51,\n\t\t\tcorners: 1,\n\t\t\trotate: 52,\n\t\t\tdirection: 1,\n\t\t\tcolor: '#000',\n\t\t\tspeed: 1.3,\n\t\t\ttrail: 25,\n\t\t\tshadow: false,\n\t\t\thwaccel: false,\n\t\t\tclassName: 'spinner',\n\t\t\tzIndex: 2e9,\n\t\t\ttop: '50%',\n\t\t\tleft: '50%'\n\t\t};\n\t\tvar target = document.getElementById('thespinner');\n\n\t    if (this.busy) return;\n\t    this.busy = true;\n\t    \n\t    var spinner = new $window.Spinner(opts).spin();\n\t\ttarget.appendChild(spinner.el);\n\t\tvar user_id = 0;\n\t\tconsole.log( $stateParams.username);\n\n\t\tUserServices.profile(\n\t\t\t{\n\t\t\t\tmethod : 'fetchByUsername',\n\t    \t\tusername : $stateParams.username\n\t\t\t},\n\t\t\tfunction(response){\n\t\t\t\tconsole.log(response);\n\t\t\t\tuser_id = response.data.User.user_id;\n\t\t\t\t\n\t\t\t\tBaseServices.post( \n\t\t\t   \t\t\"/api/follow\", \n\t\t\t   \t\t{\n\t\t\t\t\t\tmethod : filter,\n\t\t\t\t\t\tuser_id : response.data.User.user_id,\n\t\t\t\t\t\toffset : this.after\n\t\t\t\t\t},\n\t\t\t\t\tfunction(data) {\n\t\t\t\t      \tvar items = data.data;\n\t\t\t\t      \tvar items_count = items.length;\n\t\t\t\t      \tconsole.log(items.length);\n\t\t\t\t      \tfor (var i = 0; i < items_count; i++) {\n\t\t\t\t        \tthis.items.push(items[i]);\n\t\t\t\t      \t}\n\t\t\t\t      \tthis.after++;\n\t\t\t\t      \t\n\t\t\t\t      \tthis.busy = false;\n\t\t\t\t      \tif(items_count < 10) {\n\t\t\t\t      \t\tthis.busy = true;\n\t\t\t\t      \t}\n\t\t\t    \t}.bind(this)\n\t\t\t    );\n\t\t\t}.bind(this)\n\t    );\n\n      \t$timeout( function() {\n\t    \tspinner.stop();\n\t    }, 500 );\n  \t};\n  \treturn Follow;\n} ] );\r\nyamba.App.factory( \"HashtagServices\", [ \"CookieServices\", \"BaseServices\",'UserServices','$window','$timeout','$stateParams', function( CookieServices, BaseServices,UserServices, $window, $timeout,$stateParams ) {\n\tvar Hashtag = function() {\n\t    this.items = [];\n\t    this.busy = false;\n\t    this.after = 0;\n  \t};\n\n  \tHashtag.prototype.nextPage = function(filter) {\n  \t\tvar opts = {\n\t\t\tlines: 13,\n\t\t\tlength: 0,\n\t\t\twidth: 4,\n\t\t\tradius: 51,\n\t\t\tcorners: 1,\n\t\t\trotate: 52,\n\t\t\tdirection: 1,\n\t\t\tcolor: '#000',\n\t\t\tspeed: 1.3,\n\t\t\ttrail: 25,\n\t\t\tshadow: false,\n\t\t\thwaccel: false,\n\t\t\tclassName: 'spinner',\n\t\t\tzIndex: 2e9,\n\t\t\ttop: '50%',\n\t\t\tleft: '50%'\n\t\t};\n\t\tvar target = document.getElementById('thespinner');\n\n\t    if (this.busy) return;\n\t    this.busy = true;\n\t    \n\t    var spinner = new $window.Spinner(opts).spin();\n\t\ttarget.appendChild(spinner.el);\n\t\tvar user_id = 0;\n\t\tconsole.log( $stateParams.username);\n\n\t\tUserServices.profile(\n\t\t\t{\n\t\t\t\tmethod : 'fetchByUsername',\n\t    \t\tusername : $stateParams.username\n\t\t\t},\n\t\t\tfunction(response){\n\t\t\t\tconsole.log(response);\n\t\t\t\tuser_id = response.data.User.user_id;\n\t\t\t\t\n\t\t\t\tBaseServices.post( \n\t\t\t   \t\t\"/api-2/hashtag\", \n\t\t\t   \t\t{\n\t\t\t\t\t\tmethod : 'fetchFollowedHashtag',\n\t\t\t\t\t\tuser_id : response.data.User.user_id,\n\t\t\t\t\t\toffset : this.after\n\t\t\t\t\t},\n\t\t\t\t\tfunction(data) {\n\t\t\t\t      \tvar items = data.data;\n\t\t\t\t      \tvar items_count = items.length;\n\t\t\t\t      \tconsole.log(items.length);\n\t\t\t\t      \tfor (var i = 0; i < items_count; i++) {\n\t\t\t\t        \tthis.items.push(items[i]);\n\t\t\t\t      \t}\n\t\t\t\t      \tthis.after++;\n\t\t\t\t      \t\n\t\t\t\t      \tthis.busy = false;\n\t\t\t\t      \tif(items_count < 10) {\n\t\t\t\t      \t\tthis.busy = true;\n\t\t\t\t      \t}\n\t\t\t    \t}.bind(this)\n\t\t\t    );\n\t\t\t}.bind(this)\n\t    );\n\n      \t$timeout( function() {\n\t    \tspinner.stop();\n\t    }, 500 );\n  \t};\n\treturn {\n\n\t\tfollowUnfollowHashtag : function( data, successCb, errorCb ){\n\t\t\tvar filter = angular.extend( {\n\t\t\t\tmethod : \"followHashtag\"\n\t\t\t}, data );\n\t\t\tBaseServices.post( \"api/hashtag\", filter, successCb, errorCb );\n\t\t},\n\n\t\tgetPostHashtag : function( data, successCb, errorCb ){\n\t\t\tBaseServices.post( \"api/hashtagposts\", data, successCb, errorCb );\n\t\t},\n\n\t\tfetchHashtag : function( data, successCb, errorCb ){\n\t\t\tdata.method = \"fetchFollowedHashtag\";\n\t\t\tBaseServices.post( \"api/hashtagposts\", data, successCb, errorCb );\n\t\t},\n\n\t\tgetFeedsByHashtag : function( filter, callback ){\n\t\t\tvar filter = angular.extend( { \n\t\t\t\toffset : 0,\n\t\t\t\tmethod : 'fetchByHashtagName'\n\t\t\t}, filter );\n\t\t\tBaseServices.post( \"api-2/feedsearch\", filter, callback );\n\t\t},\n\n\t\tgetHashtagInfo: function(text,callback){\n\t\t\tvar filter = {\n\t\t\t\tmethod : 'fetchByHashtagname',\n    \t\t\ttext : text,\n\n\t\t\t};\n\t\t\tBaseServices.post( \"api-2/hashtag\", filter, callback );\n\t\t} ,\n\n\t}\n\n} ] );\r\nyamba.App.factory( \"LikeServices\", [ \"CookieServices\", \"BaseServices\", function( CookieServices, BaseServices ) {\n\n\treturn {\n\n\t\tlikeUnliked : function( project_id, callback ){\n\t\t\tBaseServices.post( \"/api/like\", {\n\t\t\t\tproject_id : project_id,\n\t\t\t\ttype : 'post'\n\t\t\t}, callback )\n\t\t}\n\n\t}\n\n} ] );\r\nyamba.App.factory( \"NotificationServices\", [ \"CookieServices\", \"BaseServices\", \n\t\t\t\t\t\t\t\t\t\t\tfunction( CookieServices, BaseServices ) {\n\n\treturn {\n\n\t\tgeneralNotification : function( params, successCb ){\n\t\t\tvar filter = angular.extend( {\n\t\t\t\tmethod : \"general\",\n\t\t\t\toffset : 0,\n\t\t\t\tlimit : 30\n\t\t\t}, params || {} );\n\t\t\tBaseServices.post( \"api/notification\", filter, successCb );\n\t\t},\n\n\t\trequestNotification : function( params, successCb ){\n\t\t\tvar filter = angular.extend( {\n\t\t\t\tmethod : \"request\",\n\t\t\t\toffset : 0,\n\t\t\t\tlimit : 30\n\t\t\t}, params || {} );\n\t\t\tBaseServices.post( \"api/notification\", filter, successCb );\n\t\t}\n\n\n\t}\n\n} ] );\r\nyamba.App.factory( \"PostServices\", [ \"CookieServices\", \"BaseServices\", function( CookieServices, BaseServices ) {\n\n\treturn {\n\n\n\t\tmyPost : function( offset, successCb, errorCb ){\n\t\t\tvar data = {};\n\t\t\tdata.offset = offset\n\t\t\tBaseServices.post( \"api/myposts\", data, successCb, errorCb );\n\t\t},\n\n\t\tgetPostByProjectId : function( user_id, project_id, successCb, errorCb ){\n\t\t\tvar data = {};\n\t\t\tdata.user_id = user_id;\n\t\t\tdata.project_id = project_id;\n\t\t\tBaseServices.post( \"api/specificprofilepost\", data, successCb, errorCb );\n\n\t\t},\n\n\t\tuplaodNewPost : function( file, filename, params, successCb ){\n\t\t\tvar filter = angular.extend( {\n\t\t\t\t\"method\" : \"create\",\n\t\t\t\t\"title\" : \"\",\n\t\t\t    \"description\" : \"\",\n\t\t\t    \"hashtags\" : \"\",\n\t\t\t    \"searchable\" : 1,\n\t\t\t    \"allow_downloadable_original\" : 1,\n\t\t\t    \"privacy\" : \"everyone\",\n\t\t\t    \"auth_comment\" : \"everyone\" \n\t\t\t}, params || {} );\n\t\t\tBaseServices.upload( \"api-2/project\", file, filename, filter, successCb );\n\n\t\t}\n\n\n\n\n\t}\n\n\n} ] );\r\nyamba.App.factory( \"SearchServices\", [ \"CookieServices\", \"BaseServices\", function( CookieServices, BaseServices ) {\n\n\treturn {\n\n\t\tsearchHashtag : function( filter, callback ){\n\n\t\t\tfilter = angular.extend( {\n\t\t\t\tmethod : \"fetchHashtag\",\n\t\t\t\toffset : 0\n\t\t\t}, filter )\n\t\t\tBaseServices.post( \"api-2/search\", filter, callback)\n\n\t\t},\n\n\t\tsearchFeed : function( filter, callback ){\n\t\t\t\n\t\t\tfilter = angular.extend( {\n\t\t\t\tmethod : \"fetchMedia\",\n\t\t\t\toffset : 0\n\t\t\t}, filter )\n\t\t\tBaseServices.post( \"api/search\", filter, callback)\n\n\t\t},\n\n\t\tsearchUser : function( filter, callback ){\n\t\t\t\n\t\t\tfilter = angular.extend( {\n\t\t\t\tmethod : \"fetchUser\",\n\t\t\t\toffset : 0\n\t\t\t}, filter )\n\t\t\tBaseServices.post( \"api/search\", filter, callback)\n\n\t\t},\n\n\t\tsearchFavo : function( filter, callback ){\n\t\t\t\n\t\t\tfilter = angular.extend( {\n\t\t\t\tmethod : \"fetchFavo\",\n\t\t\t\toffset : 0\n\t\t\t}, filter )\n\t\t\tBaseServices.post( \"api/search\", filter, callback)\n\n\t\t},\n\n\t}\n\n\n} ] );\r\nyamba.App.factory( \"SettingsServices\", [ \"CookieServices\", \"BaseServices\", \n\t\t\t\t\t\t\t\t\t\tfunction( CookieServices, BaseServices ) {\n\n\treturn {\n\n\t\tupdateGeneralInfo : function( params, callback ){\n\n\t\t\tvar filter = angular.extend( {\n\t\t\t\tmethod : \"changeGeneralInfo\",\n\t\t\t}, params );\n\t\t\tBaseServices.post( \"api-2/settings\", filter, callback )\n\n\t\t}\n\n\n\n\t}\n\n} ] );\r\nyamba.App.factory( \"StaticDataServices\", [ \"CookieServices\", \"BaseServices\", \n\t\t\t\t\t\t\t\t\t\tfunction( CookieServices, BaseServices ) {\n\n\treturn {\n\n\t\t\n\t\tgetTimezone : function() {\n\n\t\t\treturn [\n\t            {\n\t                \"name\": \"US/Pacific\",\n\t                \"utc\": \"(UTC-8) Pacific Time (US & Canada)\"\n\t            },\n\t            {\n\t                \"name\": \"US/Mountain\",\n\t                \"utc\": \"(UTC-7) Mountain Time (US & Canada)\"\n\t            },\n\t            {\n\t                \"name\": \"US/Central\",\n\t                \"utc\": \"(UTC-6) Central Time (US & Canada)\"\n\t            },\n\t            {\n\t                \"name\": \"US/Eastern\",\n\t                \"utc\": \"(UTC-5) Eastern Time (US & Canada)\"\n\t            },\n\t            {\n\t                \"name\": \"America/Halifax\",\n\t                \"utc\": \"(UTC-4)  Atlantic Time (Canada)\"\n\t            },\n\t            {\n\t                \"name\": \"America/Anchorage\",\n\t                \"utc\": \"(UTC-9)  Alaska (US & Canada)\"\n\t            },\n\t            {\n\t                \"name\": \"Pacific/Honolulu\",\n\t                \"utc\": \"(UTC-10) Hawaii (US)\"\n\t            },\n\t            {\n\t                \"name\": \"Pacific/Samoa\",\n\t                \"utc\": \"(UTC-11) Midway Island, Samoa\"\n\t            },\n\t            {\n\t                \"name\": \"Etc/GMT-12\",\n\t                \"utc\": \"(UTC-12) Eniwetok, Kwajalein\"\n\t            },\n\t            {\n\t                \"name\": \"Canada/Newfoundland\",\n\t                \"utc\": \"(UTC-3:30) Canada/Newfoundland\"\n\t            },\n\t            {\n\t                \"name\": \"America/Buenos_Aires\",\n\t                \"utc\": \"(UTC-3) Brasilia, Buenos Aires, Georgetown\"\n\t            },\n\t            {\n\t                \"name\": \"Atlantic/South_Georgia\",\n\t                \"utc\": \"(UTC-2) Mid-Atlantic\"\n\t            },\n\t            {\n\t                \"name\": \"Atlantic/Azores\",\n\t                \"utc\": \"(UTC-1) Azores, Cape Verde Is.\"\n\t            },\n\t            {\n\t                \"name\": \"Europe/London\",\n\t                \"utc\": \"Greenwich Mean Time (Lisbon, London)\"\n\t            },\n\t            {\n\t                \"name\": \"Europe/Berlin\",\n\t                \"utc\": \"(UTC+1) Amsterdam, Berlin, Paris, Rome, Madrid\"\n\t            },\n\t            {\n\t                \"name\": \"Europe/Athens\",\n\t                \"utc\": \"(UTC+2) Athens, Helsinki, Istanbul, Cairo, E. Europe\"\n\t            },\n\t            {\n\t                \"name\": \"Europe/Moscow\",\n\t                \"utc\": \"(UTC+3) Baghdad, Kuwait, Nairobi, Moscow\"\n\t            },\n\t            {\n\t                \"name\": \"Iran\",\n\t                \"utc\": \"(UTC+3:30) Tehran\"\n\t            },\n\t            {\n\t                \"name\": \"Asia/Dubai\",\n\t                \"utc\": \"(UTC+4) Abu Dhabi, Kazan, Muscat\"\n\t            },\n\t            {\n\t                \"name\": \"Asia/Kabul\",\n\t                \"utc\": \"(UTC+4:30) Kabul\"\n\t            },\n\t            {\n\t                \"name\": \"Asia/Yekaterinburg\",\n\t                \"utc\": \"(UTC+5) Islamabad, Karachi, Tashkent\"\n\t            },\n\t            {\n\t                \"name\": \"Asia/Dili\",\n\t                \"utc\": \"(UTC+5:30) Bombay, Calcutta, New Delhi\"\n\t            },\n\t            {\n\t                \"name\": \"Asia/Katmandu\",\n\t                \"utc\": \"(UTC+5:45) Nepal\"\n\t            },\n\t            {\n\t                \"name\": \"Asia/Omsk\",\n\t                \"utc\": \"(UTC+6) Almaty, Dhaka\"\n\t            },\n\t            {\n\t                \"name\": \"India/Cocos\",\n\t                \"utc\": \"(UTC+6:30) Cocos Islands, Yangon\"\n\t            },\n\t            {\n\t                \"name\": \"Asia/Krasnoyarsk\",\n\t                \"utc\": \"(UTC+7) Bangkok, Jakarta, Hanoi\"\n\t            },\n\t            {\n\t                \"name\": \"Asia/Hong_Kong\",\n\t                \"utc\": \"(UTC+8) Beijing, Hong Kong, Singapore, Taipei\"\n\t            },\n\t            {\n\t                \"name\": \"Asia/Tokyo\",\n\t                \"utc\": \"(UTC+9) Tokyo, Osaka, Sapporto, Seoul, Yakutsk\"\n\t            },\n\t            {\n\t                \"name\": \"Australia/Adelaide\",\n\t                \"utc\": \"(UTC+9:30) Adelaide, Darwin\"\n\t            },\n\t            {\n\t                \"name\": \"Australia/Sydney\",\n\t                \"utc\": \"(UTC+10) Brisbane, Melbourne, Sydney, Guam\"\n\t            },\n\t            {\n\t                \"name\": \"Asia/Magadan\",\n\t                \"utc\": \"(UTC+11) Magadan, Soloman Is., New Caledonia\"\n\t            },\n\t            {\n\t                \"name\": \"Pacific/Auckland\",\n\t                \"utc\": \"(UTC+12) Fiji, Kamchatka, Marshall Is., Wellington\"\n\t            }\n\t        ]\n\n\t\t}\n\n\n\t}\n\n} ] );\r\nyamba.App.factory( \"UserServices\", [ \"CookieServices\", \"BaseServices\",\"$http\",\"$q\", function( CookieServices, BaseServices,$http,$q ) {\n\n\treturn {\n\n\t\tgetLoginUser : function() {\n\t\t\treturn BaseServices.getSession( BaseServices._UserCookie );\n\t\t},\n\n\t\tlogin : function( username, password, successCb, errorCb ){\n\t\t\tvar userKey = BaseServices._UserCookie;\n\n\t\t\tBaseServices.post( \"api/auth\", {\n\t\t\t\tidentity : username,\n\t\t\t\tpassword : password\n\t\t\t}, function( response ) {\n\n\t\t\t\tif( typeof response.error == \"undefined\" && typeof response.User != \"undefined\" ){\n\n\t\t\t\t\tvar data = angular.copy( response.User );\n\t\t\t\t\tdata.token = response.token;\n\n\t\t\t\t\tCookieServices.put( userKey, data );\n\t\t\t\t\tsuccessCb( response );\n\n\t\t\t\t} // it means success\n\t\t\t\telse{\n\t\t\t\t\terrorCb( response );\t\n\t\t\t\t}\n\t\t\t}, errorCb )\n\t\t},\n\n\t\tregister : function( data, successCb, errorCb ){\n\t\t\tif( !angular.isObject( data ) )\n\t\t\t\treturn;\t\n\t\t\tdata.method = \"add\";\n\t\t\tBaseServices.post( \"api/register\", data, successCb, errorCb );\n\t\t},\n\n\t\tisLogin : function(){\n\t\t\treturn BaseServices.isLogin();\n\t\t},\n\n\t\t// so far no callback yet\n\t\tlogout : function() {\n\t\t\tCookieServices.clean();\n\t\t},\n\n\t\tprofile: function(data,successCb){\n\t\t\tBaseServices.post( \"api-2/user\", data, successCb);\n\t\t},\n\n\t\tprofile2: function(username){\n\t\t\tvar deferred = $q.defer();\n\t\t\t$http.post(\n\t\t\t\t\"api-2/user\", \n\t\t\t\t$.param({\n\t\t\t\t\tmethod : 'fetchByUsername',\n\t    \t\t\tusername : username\n\t\t\t\t})\n\t\t\t).success(function(response) {\n            \tdeferred.resolve(response);\n\t        }).error(function(reason) {\n\t            // logger.error('XHR Failed for retrievePaginateUsers.' + error.data);\n\t            deferred.reject(reason);\n\t        });\n\t        return deferred.promise;\n\t\t}\n\n\n\n\n\t}\n\n} ] )\r\nyamba.App.factory('serializeFormPostData', serializeFormPostData);\n\t\nfunction serializeFormPostData() {\n\n\tfunction transformRequest( data, getHeaders ) {\n\n\t\tvar headers = getHeaders();\n\n\t\theaders[ \"Content-type\" ] = \"application/x-www-form-urlencoded; charset=utf-8\";\n\n\t\treturn( serializeData( data ) );\n\n\t}\n\n\treturn( transformRequest );\n\n\tfunction serializeData( data ) {\n\n\t\tif ( ! angular.isObject( data ) ) {\n\n\t\t\treturn( ( data == null ) ? \"\" : data.toString() );\n\n\t\t}\n\n\t\tvar buffer = [];\n\n\t\tfor ( var name in data ) {\n\n\t\t\tif ( ! data.hasOwnProperty( name ) ) {\n\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tvar value = data[ name ];\n\n\t\t\tbuffer.push(\n\t\t\t\tencodeURIComponent( name ) +\n\t\t\t\t\"=\" +\n\t\t\t\tencodeURIComponent( ( value == null ) ? \"\" : value )\n\t\t\t);\n\n\t\t}\n\n\t\tvar source = buffer\n\t\t\t.join( \"&\" )\n\t\t\t.replace( /%20/g, \"+\" )\n\t\t;\n\n\t\treturn( source );\n\t}\n}\r\nyamba.App.directive( \"ybHtmlUnsafe\", [ \"$sce\", function( $sce ) {\n\n\treturn {\n\t\trestrict : \"AC\",\n\t\tscope : {\n\t\t\tybHtmlUnsafe: '='\n\t\t},\n\t\ttemplate: \"<div ng-bind-html='trustedHtml'></div>\",\n\t\tlink : function( $scope, elem, attr ){\n\n\t\t\t$scope.updateHtml = function() {\n\t\t\t\t$scope.trustedHtml = $sce.trustAsHtml( $scope.ybHtmlUnsafe ); \n\t\t\t}\n\t\t\t$scope.$watch( 'ybHtmlUnsafe', function() {\n\n\t\t\t\tif( typeof $scope.ybHtmlUnsafe != \"undefined\" ){\n\t\t\t\t\t$scope.updateHtml();\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t}\n\t}\t\n\n} ] );\r\nyamba.App.directive( 'ybTextBoxLimit', [ \"$timeout\", function( $timeout ) {\n\n\treturn {\n\t\trestrict : \"AC\",\n\t\tscope : {\n\t\t},\n\t\tlink : function( $scope, element, attr ){\n\n\t\t\tvar charLength = 0, \n\t\t\t\tcontainer_counter = $( \"#\" + attr.ybTextboxCounterContainer ),\n\t\t\t\tcharMaxLength = parseInt( attr.ybTextBoxLimit );\n\n\t\t\t// init the box counter\n\t\t\tcontainer_counter.html( \"0 / \" + charMaxLength )\n\n\t\t\t$( element ).unbind( 'keypress' ).bind( 'keypress', function() {\n\t\t\t\tcharLength = parseInt( this.value.length ) + 1;\n\n\t\t\t\tif( charLength >= charMaxLength ){\n\t\t\t\t\tthis.value = this.value.toString().substring( 0,  charMaxLength - 1 );\n\t\t\t\t\tcharLength = charMaxLength;\n\t\t\t\t}\n\t\t\t\tif( container_counter.length > 0 ){\n\t\t\t\t\tcontainer_counter.html( charLength + \" / \" + charMaxLength )\n\t\t\t\t}\n\n\t\t\t} )\t\n\n\t\t}\n\t}\t\n\n} ] );\r\nyamba.App.directive( \"ybRelatedFavos\", [ \"$timeout\", function( $timeout ) {\n\n\treturn {\n\t\trestrict : \"AC\",\n\t\tscope : {\n\t\t\tfavos : \"=\"\n\t\t},\n\t\ttemplateUrl : \"app/views/directives/favos/related-favos.php\",\n\t}\t\n\n} ] );\r\nyamba.App.directive( \"ybFeed\",['LikeServices','ModalService',function(LikeServices,ModalService) {\n\n\treturn {\n\t\trestrict : \"CA\",\n\t\tscope : {\n\t\t\tdata : \"=record\",\n\t\t\tview : \"@\"\n\t\t},\n\t\ttemplateUrl : function( element, attr ){ \n\t\t\treturn \"app/views/directives/post/feed-\" + attr.view + \".php\";\n\t\t},\n\t\tlink : function( $scope, element, attr ){\n\n\t\t\t$scope.addCollection = function( data ) {\n\t\t\t\tModalService.showModal( {\n\t\t\t      \ttemplateUrl: \"app/views/modal/collecton.php\",\n\t\t\t      \tcontroller: \"ModalCollectionController\",\n\t\t\t      \tinputs : {\n\t\t\t      \t\tpost : data\n\t\t\t      \t}\n\t\t\t    } ).then( function( modal ) {\n\t\t\t      modal.close.then( function( result ) {\n\n\t\t\t      } );\n\t\t\t    } );\n\t\t\t\t\n\t\t\t}\n\n\n\t\t\t$scope.likeFeed = function(data){\n\t\t\t\tLikeServices.likeUnliked( data.project_id, function( response ){\n\t\t\t\t\tvar scope_ctr = data.scope_ctr;\n\t\t\t\t\tvar queryElement = document.querySelectorAll('article');\n\t\t\t\t\tvar target = angular.element(queryElement[scope_ctr]).find('.itemLikes');\n\t\t\t\t\tvar count = target.text();\n\t\t\t\t\tif( response.data.islike ){\n\t\t\t\t\t\ttarget.addClass('liked instantAnimation pulse');\n\t\t\t\t\t\t$scope.$parent.feeds[data.scope_ctr]['like_count']+=1;\n\t\t\t\t\t\t$scope.$parent.feeds[data.scope_ctr]['like_count_int']+=1;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttarget.removeClass('liked');\n\t\t\t\t\t\t$scope.$parent.feeds[data.scope_ctr]['like_count']-=1;\n\t\t\t\t\t\t$scope.$parent.feeds[data.scope_ctr]['like_count_int']-=1;\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t};\n\n\t\t\t$scope.commentModal = function(project_id,scope_ctr){\n\t\t\t\tModalService.showModal({\n\t\t\t\t\ttemplateUrl: \"app/views/directives/post/comments.php\",\n\t\t\t\t\tcontroller: \"CommentController\",\n\t\t\t\t\tinputs: {\n\t\t\t\t\t    project_id: project_id,\n\t\t\t\t\t    scope_ctr: scope_ctr\n\t\t\t\t\t}\n\t\t\t\t}).then(function(modal) {\n\t\t\t\t\tmodal.close.then(function(result) {\n\t\t\t\t\t    // $scope.customResult = \"All good!\";\n\t\t\t\t\t});\n\t    \t\t});\n\t\t\t};\n\n\n\n\t\t\t$scope.deleteFeed = function(project_id){\n\t\t\t\tconsole.log(project_id);\n\t\t\t\t// $route.reload();\n\t\t\t};\n\n\t\t\t$scope.feed_options = function(userInfo){\n\t\t\t\tModalService.showModal( {\n\t\t\t      \ttemplateUrl: \"app/views/modal/feed-options.php\",\n\t\t\t      \tcontroller: \"FeedOptionsController\",\n\t\t\t      \tinputs : {\n\t\t\t      \t\tuser : userInfo\n\t\t\t      \t}\n\t\t\t    } ).then( function( modal ) {\n\t\t\t      modal.close.then( function( result ) {\n\n\t\t\t      } );\n\t\t\t    } );\n\t\t\t}\n\t\t}\n\t} \n\n} ]);\n\r\n\nyamba.App.directive( \"ybFeeds\", [ \"$compile\", \"$timeout\", \"UserServices\",\"FeedServices\", \"HashtagServices\",\"$document\",\"$window\",\"$state\", \"FavoServices\",\n\t\t\t\t\t\t\t\t\tfunction( $compile, $timeout,UserServices, FeedServices, HashtagServices,$document,$window,$state, FavoServices ) {\n\t/***************** pattern *********************/\n\tvar pattern = [\t'w3','w2','w1',\n\t\t\t\t\t'w1','w2','w3',\n\n\t\t\t\t\t'w2','w1','w1',\n\t\t\t\t\t'w1','w1','w3',\n\t\t\t\t\t\n\t\t\t\t\t'w3','w2','w2',\n\t\t\t\t\t'w2','w2','w3',\n\t\t\t\t\t\n\t\t\t\t\t'w2','w1','w1',\n\t\t\t\t\t'w2','w3','w2',\n\t\t\t\t\t\n\t\t\t\t\t'w1','w1','w1',\n\t\t\t\t\t'w1','w3','w2',\n\t\t\t\t\t\n\t\t\t\t\t'w1','w1','w3',\n\t\t\t\t\t'w3','w2','w2',\n\t\t\t\t\t\n\t\t\t\t\t'w2','w2','w3',\n\t\t\t\t\t'w2','w1','w1',\n\t\t\t\t\t\n\t\t\t\t\t'w2','w3','w2',\n\t\t\t\t\t'w1','w1','w1',\n\t\t\t\t\t\n\t\t\t\t\t'w1','w3','w2',\n\t\t\t\t\t'w1','w1','w3',\n\t\t\t\t\t\n\t\t\t\t\t'w3','w2','w2',\n\t\t\t\t\t'w2','w2'];\n\t// var ctr = 0;\n\tvar ctr = {\n\t\tmypost : 0,\n\t\tmylikepost : 0,\n\t\tactivity : 0,\n\t\tfeatured : 0,\n\t\thashtag : 0,\n\t\ttrending : 0,\n\t\tfavofeed : 0,\t\t\n\t};\n\n\tvar scroll = {\n\t\tmypost : false,\n\t\tmylikepost : false,\n\t\tactivity : false,\n\t\tfeatured : false,\n\t\thashtag : false,\n\t\ttrending : false\t\t\n\t};\n\n\tvar buildTemplate = function( data, classes, current_length,request ) {\n\t\tvar template = \"\", \n\t\tgetPattern = function( i ){\n\t\t\treturn pattern[ i ];\n\t\t} ;\n\t\tgetHashtagColor = function(image_color_data){\n\t\t\tvar hashtag_color = null;\n\t\t\tif(angular.isObject(image_color_data)){\n\t\t\t\thashtag_color = 'rgb(' + image_color_data.R + ',' + image_color_data.G + ',' + image_color_data.B + ')';\n\t\t\t}\n\t\t\telse{\n\t\t\t\thashtag_color = 'rgb(31,32,33)';\n\t\t\t}\n\t\t\treturn hashtag_color;\n\t\t}\n\t\tfor( var i = ( data.length - current_length ); i < data.length; i++ ){\n\t\t\tvar cls = getPattern( ctr[request] );\n\t\t\tvar hashtag_background_color = getHashtagColor(data[i].Image_color);\n\t\t\tdata[i]['hashtag_color'] = hashtag_background_color;\n\t\t\tdata[i]['scope_ctr'] = i;\n\t\t\ttemplate += '<figure class=\"item animated fadeIn ' + cls + '\" yb-feed record=\"feeds[ ' + i + ' ]\" view=\"' + cls + '\" hashtag_color=\"'+ hashtag_background_color +'\"></figure>';\n\t\t\tif(ctr[request] == 58){\n\t\t\t\tctr[request] = 0;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tctr[request]++;\n\t\t\t}\n\t\t}\n\t\t// console.log(\"Counter Summary:\"+ctr[request]);\n\t\treturn template;\n\t}\n\t/***************** pattern *********************/\n\tvar request = {\n\n\t\tmypost : function( filter, cb ){\n\t\t\tconsole.log(filter);\n\t\t\tUserServices.profile(\n\t\t\t\t{\n\t\t\t\t\tmethod : 'fetchByUsername',\n\t\t    \t\tusername : filter.username\n\t\t\t\t},\n\t\t\t\tfunction(response){\n\t\t\t\t\tfilter = angular.extend( { \n\t\t\t\t\t\tuser_id : response.data.User.user_id\n\t\t\t\t\t}, filter );\n\t\t\t\t\tFeedServices.getMyPost( filter, function( response ) {\n\t\t\t\t\t\tcb( response.Posts );\n\t\t\t\t\t} )\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\n\t\tmylikepost : function( filter, cb ){\n\t\t\tconsole.log(filter);\n\t\t\tUserServices.profile(\n\t\t\t\t{\n\t\t\t\t\tmethod : 'fetchByUsername',\n\t\t    \t\tusername : filter.username\n\t\t\t\t},\n\t\t\t\tfunction(response){\n\t\t\t\t\tfilter = angular.extend( { \n\t\t\t\t\t\tuser_id : response.data.User.user_id\n\t\t\t\t\t}, filter );\n\t\t\t\t\tFeedServices.getMyLikePost( filter, function( response ) {\n\t\t\t\t\t\tcb( response.my_likes );\n\t\t\t\t\t} )\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\n\t\tactivity : function( filter, cb ) {\n\t\t\tFeedServices.getActivityFeeds( filter, function( response ) {\n\t\t\t\tcb( response.Activity_Feed )\t\n\t\t\t} );\n\t\t},\n\t\n\t\tfeatured : function( filter, cb ) {\n\t\t\tFeedServices.getFeaturedFeeds( filter, function( response ) {\n\t\t\t\tcb( response.Activity_Feed );\n\t\t\t} );\n\t\t},\n\n\t\thashtag : function( filter, cb ) {\n\t\t\tHashtagServices.getFeedsByHashtag( filter, function( response ) {\n\t\t\t\tcb( response.data );\n\t\t\t} )\n\t\t},\n\n\t\ttrending : function( filter, cb ) {\n\t\t\tFeedServices.getFeedsTrending( filter, function( response ) {\n\t\t\t\tcb( response.Activity_Feed );\n\t\t\t} )\n\t\t},\n\n\t\tfavofeed : function( filter, cb ) {\n\t\t\tFavoServices.fetchFavoPost( filter, function( response ) {\n\t\t\t\tcb( response.data.Favo_Feed );\n\t\t\t} )\n\t\t}\n\n\t}\t\n\n\t/***************** directive *******************/\n\treturn {\n\t\trestrict : \"E\",\n\t\tscope : {\n\t\t\tfilter : \"=\",\n\t\t\ttype : '@',\n\t\t\tcallback : '&'\n\t\t},\n\t\tlink : function( $scope, element, attr ){\n\n\t\t\t$scope.feeds = [];\n\n\t\t\t$scope.likePost = function(project_id){\n\t\t\t\tconsole.log(project_id);\n\t\t\t}\n\n\t\t\tvar opts = {\n\t\t\t\tlines: 13,\n\t\t\t\tlength: 0,\n\t\t\t\twidth: 4,\n\t\t\t\tradius: 51,\n\t\t\t\tcorners: 1,\n\t\t\t\trotate: 52,\n\t\t\t\tdirection: 1,\n\t\t\t\tcolor: '#000',\n\t\t\t\tspeed: 1.3,\n\t\t\t\ttrail: 25,\n\t\t\t\tshadow: false,\n\t\t\t\thwaccel: false,\n\t\t\t\tclassName: 'spinner',\n\t\t\t\tzIndex: 2e9,\n\t\t\t\ttop: '50%',\n\t\t\t\tleft: '50%'\n\t\t\t};\n\t\t\tvar target = document.getElementById('thespinner');\n\n\t\t\tvar dFilter = angular.copy( $scope.filter )||{}, feedFigure = \"\", feedFigureTpl, feedTemplateCompile;\n\t\t\tdFilter = angular.extend( { \n\t\t\t\toffset : 0\n\t\t\t}, dFilter );\n\n\t\t\tvar fetchFeeds = function() {\n\t\t\t\t// console.log(\"Scope Type:\"+$scope.type+\" Ctr of Type:\"+ctr[$scope.type]);\n\t\t\t\tif( dFilter.offset >= 100 || scroll[$scope.type] == true){\n\t\t\t\t\tscroll[$scope.type] = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif( typeof request[ $scope.type ] != \"undefined\" ){\n\t\t\t\t\tif(dFilter.offset == 0){\n\t\t\t\t\t\tctr[$scope.type] = 0;\n\t\t\t\t\t}\n\t\t\t\t\tvar spinner = new $window.Spinner(opts).spin(target);\n\t\t\t\t\trequest[ $scope.type ]( dFilter,  function( responseFeeds ) {\n\t\t\t\t\t\t// console.log(responseFeeds);\n\t\t\t\t\t\t// console.log(responseFeeds.length);\n\t\t\t\t\t\tif(responseFeeds.length <= 9){\n\t\t\t\t\t\t\tscroll[$scope.type] = true;\n\t\t\t\t\t\t\t// console.log(scroll[$scope.type]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$scope.feeds = $scope.feeds.merge( responseFeeds );\n\n\t\t\t\t\t\tfeedFigureTpl = buildTemplate( $scope.feeds, FeedServices.classes, responseFeeds.length,$scope.type);\n\n\t\t\t\t\t\tfeedTemplateCompile = $compile( feedFigureTpl )( $scope );\n\n\t\t\t\t\t\telement.append( feedTemplateCompile );\n\n\t\t\t\t\t\t$timeout( function() {\n\t\t\t\t\t\t\t$( \".masonry\" ).masonry({\n\t\t\t\t\t\t\t\tcolumnWidth: 20,\n\t\t\t\t\t\t\t\titemSelector: '.item'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t$( \".masonry\" ).masonry( 'reloadItems' );\n\t\t\t\t\t\t\t$( \".masonry\" ).masonry( 'layout' );\n\t\t\t\t\t\t\tspinner.stop();\n\t\t\t\t\t\t}, 500 )\n\n\t\t\t\t\t\t// callback\n\t\t\t\t\t\tif( typeof $scope.callback == \"function\" ){\n\t\t\t\t\t\t\t$scope.callback( { feeds : $scope.feeds } );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} )\n\n\t\t\t\t}\t\n\n\t\t\t\tdFilter.offset++;\n\n\t\t\t}\n\n\t\t\tfetchFeeds();\n\n\t\t\t$( window ).scroll( function( event ){\n\t\t\t\tvar scrollBottom = $( document ).height() - $( window ).height() - $( window ).scrollTop();\n\t\t\t\tif( scrollBottom == 0 ){\n\t\t\t\t\tif($state.is('main.activity_feed') || $state.is('main.hashtag') || $state.is('main.featured') || $state.is('main.trending') || $state.is('main.profile') || $state.is('main.favo') ){\n\t\t\t\t\t\tfetchFeeds();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t}\n\t}\n\n} ] )\n\r\nyamba.App.directive( \"ybNotificationMessageBuilder\", [ \"$timeout\", \"FollowServices\",\n\t\t\t\t\t\t\t\t\tfunction( $timeout, FollowServices ) {\n\n\n\treturn {\n\t\trestrict : \"AC\",\n\t\tscope : {\n\t\t\tlayout : '@',\n\t\t\tmessage : '=',\n\t\t},\n\t\ttemplateUrl : function( $scope, element, attr ) {\n\t\t\treturn \"app/views/directives/notifications/layout.php\";\n\t\t},\n\t\tlink : function( $scope, element, attr ){\n\n\t\t\t$scope.confirmFollowRequest = function( confirm, user_id ){\n\n\t\t\t\tif( confirm == true ){\n\t\t\t\t\tFollowServices.confirmFollowRequest( user_id, function() { \n\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tFollowServices.ignoreFollowRequest( user_id, function() { \n\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t$( element ).remove();\n\t\t\t}\n\n\t\t}\n\t}\t\n\n} ] );\r\nyamba.App.directive( \"ybPostMedia\", [ \"$timeout\", \"$sce\", \"FeedServices\", function( $timeout, $sce, FeedServices ) {\n\n\n\treturn {\n\t\trestrict : \"AC\",\n\t\tscope : {\n\t\t\tproject : \"=\",\n\t\t},\n\t\ttemplateUrl : \"app/views/directives/post/post-media.php\",\n\t\tlink : function( $scope, element, attr ){\n\t\t\t// hide first\n\t\t\t$scope.render={\n\t\t\t\timage : false,\n\t\t\t\tembedded : false\n\t\t\t};\n\n\t\t\t$scope.embedded = [];\n\n\t\t\tvar urlRegex = /(http|ftp|https):\\/\\/[\\w-]+(\\.[\\w-]+)+([\\w.,@?^=%&amp;:\\/~+#-]*[\\w@?^=%&amp;\\/~+#-])/gi;\n\t\t\tvar createFrame = function( url ){\n\t\t\t\treturn '<iframe width=\"560\" height=\"315\" src=\"'+ url +'\" frameborder=\"0\" allowfullscreen></iframe>';\n\t\t\t}\n\t\t\tvar isFirefox = false;\n\t\t\tvar browser = navigator.userAgent.toLowerCase();\n\t\t\tif( browser.indexOf( 'firefox' ) > -1 ) {\n\t\t\t\tisFirefox = true;\n\t\t\t}\n\n\n\n\n\t\t\tvar fetchMedia = function() {\n\t\t\t\tFeedServices.getPostMedia( {\n\t\t\t\t\tproject_id : $scope.project.project_id\n\t\t\t\t}, function( response ) {\n\t\t\t\t\t$scope.embed = \"\";\n\t\t\t\t\tvar content = \"\", match ;\n\t\t\t\t\tfor( var i = 0; i < response.data.Embedded.length; i++ ){\n\t\t\t\t\t\tcontent = response.data.Embedded[ i ];\n\n\t\t\t\t\t\tif( isFirefox ) {\n\t\t\t\t\t\t\t$scope.embed =  $sce.trustAsHtml( content );\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{ \n\t\t\t\t\t\t\tmatch = content.toString().match( urlRegex );\n\t\t\t\t\t\t\t$scope.embed = $sce.trustAsHtml( createFrame( match[ 0 ] ) ); \t\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t} )\n\n\t\t\t}\t\n\n\t\t\t// just make sure the project is not undefined\n\t\t\t$scope.$watch( \"project\", function() {\n\n\t\t\t\t// if( typeof $scope.project != \"undefined\" ){\n\n\t\t\t\tif( angular.isObject($scope.project) ){\n\n\t\t\t\t\tif( angular.isObject($scope.project.Media) ){\n\t\t\t\t\t\tif( $scope.project.Media.type == \"null\" ){\n\t\t\t\t\t\t\t$scope.render.image = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t$scope.render.embedded = true;\n\t\t\t\t\t\t\tfetchMedia();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t} )\n\n\t\t}\n\t}\t\n\n} ] );\r\nyamba.App.directive( \"ybRelatedPost\", [ \"$timeout\", function( $timeout ) {\n\n\n\treturn {\n\t\trestrict : \"AC\",\n\t\tscope : {\n\t\t\tprojects : \"=\"\n\t\t},\n\t\ttemplateUrl : \"app/views/directives/post/related-post.php\",\n\t}\t\n\n\n} ] );\r\nyamba.App\n.directive( \"followInfo\", function(){\n\n    var directive = {\n    \trestrict : \"EA\",\n        templateUrl: 'app/views/directives/user/follow-info.php',\n        scope: {\n        \tdata : '=',\n        \tmethod : '='\n        },\n        link : function( $scope, element, attr ){\n        \t$scope.follow = function(id){\n        \t\tconsole.log(id);\n        \t}\n\n        \t$scope.unfollow = function(id){\n                console.log(id);\n        \t}\n        }\n    };\n    return directive;\n});\n\n// yamba.App\n// .directive( \"followInfo\", [\"BaseServices\",'$compile',function(BaseServices,$compile){\n// \tvar buildTemplate = function( data, current_length,request ) {\n// \t\ttemplate = '';\n// \t\tfor( var i = ( data.length - current_length ); i < data.length; i++ ){\n// \t\t\ttemplate +='<li>';\n// \t\t    template +=    '<a ui-sref=\"main.profile({ username:'+ data.User.username +'})\">';\n// \t\t    template +=\t     \t'<img class=\"userImage circle\" src=\"http://yamba.rocks/services/{{'+ data.User.storage_path +'}}\" />';\n// \t\t    template +=\t\t'</a>';\n// \t\t    template +=    '<h3>';\n// \t\t    template +=\t\t\t'<a ui-sref=\"main.profile({ username:'+ data.User.username +'})\" class=\"followUsername\">{{'+ data.User.username +'}}</a>';\n// \t\t    template +=    '</h3>';\n// \t\t    template +='</li>';\n// \t\t}\n// \t\treturn template;\n// \t}\n//     var directive = {\n//     \trestrict : \"EA\",\n//         // templateUrl: 'app/views/directives/user/follow-info.php',\n//         scope: {\n//         \tfilter : '=',\n//         \tuser: '='\n//         },\n//         link : function( $scope, element, attr ){\n//         \t$scope.feeds = [];\n\n//         \tvar opts = {\n// \t\t\t\tlines: 13,\n// \t\t\t\tlength: 0,\n// \t\t\t\twidth: 4,\n// \t\t\t\tradius: 51,\n// \t\t\t\tcorners: 1,\n// \t\t\t\trotate: 52,\n// \t\t\t\tdirection: 1,\n// \t\t\t\tcolor: '#000',\n// \t\t\t\tspeed: 1.3,\n// \t\t\t\ttrail: 25,\n// \t\t\t\tshadow: false,\n// \t\t\t\thwaccel: false,\n// \t\t\t\tclassName: 'spinner',\n// \t\t\t\tzIndex: 2e9,\n// \t\t\t\ttop: '50%',\n// \t\t\t\tleft: '50%'\n// \t\t\t};\n\n// \t\t\tvar target = document.getElementById('thespinner');\n\n// \t\t\tvar dFilter = angular.copy( $scope.filter )||{}, feedFigure = \"\", feedFigureTpl, feedTemplateCompile;\n// \t\t\tdFilter = angular.extend( { \n// \t\t\t\toffset : 0,\n// \t\t\t\tuser_id : angular.copy( $scope.user )\n// \t\t\t}, dFilter );\n\n// \t\t\tvar fetchFeeds = function() {\n// \t\t\t\tBaseServices.post( \n// \t   \t\t\t\t\"/api/follow\",\n// \t   \t\t\t\tdFilter,\n// \t   \t\t\t\tfunction(responseFeeds) { \n// \t   \t\t\t\t\tconsole.log(responseFeeds);\n// \t\t\t\t\t\t$scope.feeds = $scope.feeds.merge( responseFeeds );\n\n// \t\t\t\t\t\tfeedFigureTpl = buildTemplate( $scope.feeds, responseFeeds.length,$scope.type);\n\n// \t\t\t\t\t\tfeedTemplateCompile = $compile( feedFigureTpl )( $scope );\n\n// \t\t\t\t\t\telement.append( feedTemplateCompile );\n// \t \t\t\t\t}\n// \t \t\t\t);\n\n// \t\t\t\tdFilter.offset++;\n// \t\t\t}\n\n// \t\t\tfetchFeeds();\n\n// \t\t\t$( window ).scroll( function( event ){\n// \t\t\t\tvar scrollBottom = $( document ).height() - $( window ).height() - $( window ).scrollTop();\n// \t\t\t\tif( scrollBottom == 0 ){\n// \t\t\t\t\tfetchFeeds();\n// \t\t\t\t}\n// \t\t\t} );\n//         }\n//     };\n//     return directive;\n// }]);\r\nyamba.App\n.directive( \"profileFeed\", [\"FollowServices\",function(FollowServices){\n\n    var directive = {\n    \trestrict : \"EA\",\n        templateUrl: 'app/views/user/profile/profile-feeds.php',\n        scope: {\n        \tfilter : '=',\n        },\n    };\n    return directive;\n}]);\r\nyamba.App\n.directive( \"profileHeader\", [\"FollowServices\",function(FollowServices){\n\n    var directive = {\n    \trestrict : \"EA\",\n        templateUrl: 'app/views/user/profile/profile-header.php',\n        scope: {\n        \tdata : '=',\n        \tcover: '=',\n        \tfollow: '=',\n            group: '='\n        },\n        link : function( $scope, element, attr ){\n            $scope.followButtonFunction = function(user_id){\n                FollowServices.followUnfollow( user_id, function( response ) {\n                    var status = FollowServices.followStatus( response.is_followed, response.pending_approval );\n                    angular.element(document.getElementById('follow_status')).html(status);\n                } );\n            }\n        }\n    };\n    return directive;\n}]);\r\nyamba.App .controller('LeftMenuController', ['$scope', \"BoxServices\",\n\t\t\t\t\t\t\t\t\t\t\tfunction( $scope, BoxServices ) {\n\n\t$scope.boxes = [];\n\n\t$scope.$watch( \"$parent.Constant.boxes\", function( ){\n\t\t\n\t\tif( $scope.$parent.Constant.boxes.length == 0 ) return;\n\t\t$scope.boxes = $scope.$parent.Constant.boxes;\n\n\t} )\t\n\n\n}]);\r\nyamba.App .controller('ModalBoxController', ['$scope', 'user', 'close', \"BoxServices\",\n\t\t\t\t\t\t\t\t\t\t\tfunction( $scope, user, close, BoxServices ) {\n\t$scope.display = true;\n\t$scope.user = user;\n\t$scope.boxes = [];\n\n\tBoxServices.getBox( function( response ) {\n\t\t$scope.boxes = response.Box.chunk( 3 );\n\t} )\n\n\t$scope.addBox = function( circle_id ){\n\t\tBoxServices.addUserToBox( circle_id, $scope.user.user_id, function(){ } );\n\t}\n\n\t$scope.close = function() {\n\t    $scope.display = false;\n\t\tclose();\n\t};\n\n}]);\r\nyamba.App .controller('ModalCollectionController', ['$scope', \"$timeout\", \"FavoServices\", \"post\", \n\t\t\t\t\t\t\t\t\t\t\tfunction( $scope, $timeout, FavoServices, post ) {\n\t$scope.display = true;\n\t$scope.collections = [];\n\t$scope.fileReaderSupported = window.FileReader != null && (window.FileAPI == null || FileAPI.html5 != false);\n\n\tFavoServices.fetchFavoList({}, function( response ){\n\t\t$scope.collections = response.data;\n\t} )\n\n\t$scope.generateThumb = function(file) {\n\t\tif (file != null) {\n\t\t\tif ($scope.fileReaderSupported && file.type.indexOf('image') > -1) {\n\t\t\t\t$timeout(function() {\n\t\t\t\t\tvar fileReader = new FileReader();\n\t\t\t\t\tfileReader.readAsDataURL(file);\n\t\t\t\t\tfileReader.onload = function(e) {\n\t\t\t\t\t\t$timeout(function() {\n\t\t\t\t\t\t\tfile.dataUrl = e.target.result;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\t$scope.addCollection = function( form ){\n\t\t\n\t\tNotifier.show( \"Uploading.. Please wait.\" );\n\t\tif( form.$valid ){\n\t\t\tFavoServices.createFavo( $scope.collection.file, \"Filedata\", {\n\t\t\t\ttitle : $scope.collection.name,\n\t\t\t\tprivacy : $scope.collection.privacy,\n\t\t\t\tcategory : ''\n\t\t\t}, function( response ) {\n\t\t\t\t$scope.selected_collection = response.data.favcircle_id;\n\t\t\t\t$scope.addProject();\n\n\t\t\t\tNotifier.hide();\n\t\t\t\t$scope.close();\n\t\t\t} )\n\t\t}\n\n\t}\n\n\t$scope.addProject = function() {\n\t\tFavoServices.addProjectToFavo( {\n\t\t\tproject_id : post.project_id,\n\t\t\tfavcircle_id : $scope.selected_collection\n\t\t}, function() {\n\t\t\t$scope.close();\n\t\t} )\n\t}\n\t\n\n\t$scope.close = function() {\n\t    $scope.display = false;\n\t\tclose();\n\t};\n\n}]);\r\nyamba.App .controller('ModalRepostController', ['$scope', 'post', 'close',\n\t\t\t\t\t\t\t\t\t\t\tfunction( $scope, post, close ) {\n\t$scope.display = true;\n\n\t$scope.post = post;\n\n\t$scope.repostPost = function(){\n\t\talert( 'no repost api but after this is done.');\n\t\t$scope.close();\n\t}\n\n\t$scope.close = function() {\n\t    $scope.display = false;\n\t\tclose();\n\t};\n\n}]);\r\nyamba.App .controller( 'NewPostController', [ '$scope', \"UserServices\", \"PostServices\",\n\t\t\t\t\t\t\t\t\t\t\tfunction( $scope, UserServices, PostServices ) {\n\t\n\t$scope.current_user = UserServices.getLoginUser();\n\t$scope.fileReaderSupported = window.FileReader != null && (window.FileAPI == null || FileAPI.html5 != false);\n\n\tvar resetVars = function(){\t\n\t\t$scope.post = {\n\t\t\tprivacy : \"public\",\n\t\t\ttitle : \"\",\n\t\t\tdescription : \"\",\n\t\t\thashtags : \"\"\n\t\t}\n\t\t$scope.newPostError = '';\t\n\t\t$scope.upload_type = '';\n\t}\n\tresetVars();\n\n    $scope.closeModal = function(){\n    \tdelete $scope.files;\n\t\tresetVars();\n\t\t$( \"#newPostContainer\" ).css( { \n\t\t\t'display' : 'none'\t\n\t\t} );\t\n\t}\n\n\t$scope.showUploadForm = function( type ){\n\t\t$scope.upload_type = type;\n\t\t$( \"#uploadMediaStep1\" ).css( { 'display':'none' } )\n\t\t$( \"#uploadMediaStep2\" ).css( { 'display':'block' } )\n\t\t$( \"#uploadMediaStep3\" ).css( { 'display':'none' } )\n\t}\n\n\n\t$scope.nextNewPostForm = function(){\n\t\tif( typeof $scope.files == \"undefined\") return;\n\t\t$( \"#uploadMediaStep1\" ).css( { 'display':'none' } )\n\t\t$( \"#uploadMediaStep2\" ).css( { 'display':'none' } )\n\t\t$( \"#uploadMediaStep3\" ).css( { 'display':'block' } )\n\t}\n\n\n\tvar refineHashtag = function( hashtags, addHash, addComma ){\n\t\tvar hashtag = \"\";\n\t\tvar hashtag_counts = hashtags.length;\n\t\tvar tmp_hashtags = \"\";\n\t\tif( hashtag_counts > 3 ){\n\t\t\thashtag_counts = 3\n\t\t}\n\t\n\t\tfor( var i = 0; i < hashtag_counts; i++ ){\n\t\t\thashtag = hashtags[ i ];\n\t\t\t// remove hashtag\n\t\t\thashtag = hashtag.replace( /[!@#\\$%\\^\\&*\\)\\(+=._,]+/g, \"\" );\n\t\t\tif( addHash == true ){\n\t\t\t\thashtag = \"#\" + hashtag; // add hashtag in the first\n\t\t\t}\n\t\t\ttmp_hashtags += hashtag; \n\n\t\t\tif( addComma == true ){\n\t\t\t\ttmp_hashtags += \",\";\n\t\t\t}else{\n\t\t\t\ttmp_hashtags += \" \";\n\t\t\t}\n\t\t}\n\n\t\treturn tmp_hashtags;\n\t}\n\n\t$scope.hashtagCheker = function(){\n\n\t\tvar hashtags =  $scope.post.hashtags.toString().match( /[\\w#]+/g );\n\t\t$scope.post.hashtags = refineHashtag( hashtags, true, false );\n\n\t}\n\n\n\t$scope.newPostSubmit = function(){\n\t\tvar params = {\n\t\t\ttitle : $scope.post.title,\n\t\t\tdescription : $scope.post.description,\n\t\t\tprivacy : $scope.post.privacy,\n\t\t\thashtags : \"\"\n\t\t};\n\t\tvar hashtags =  $scope.post.hashtags.toString().match( /[\\w#]+/g );\n\t\tparams.hashtags = refineHashtag( hashtags, false, true );\n\t\tNotifier.show( \"Uploading... Please wait...\")\n\t\tPostServices.uplaodNewPost( $scope.files, \"Filedata\", params, function( response ) {\n\n\t\t\tif( typeof response.data != \"undefined\" ){\n\t\t\t\t$scope.closeModal();\n\t\t\t}\n\t\t\telse{\n\t\t\t\t$scope.newPostError = \"Error\";\n\t\t\t}\n\t\t\tNotifier.hide();\n\t\t} )\t\t\n\n\t}\n\n\n} ] );\r\nyamba.App .controller('SearchFormController', ['$scope', '$state',\n\t\t\t\t\t\t\t\t\t\t\tfunction( $scope, $state ) {\n\n\t$scope.searchKeyword = function( form ){\n\n\t\tif( form.$valid ){\n\n\t\t\t$scope.closeSearchModal();\t\t\t\n\n\t\t\t$state.go( 'main.search', {\n\t\t\t\tkeyword : $scope.search.keyword \n\t\t\t} );\n\n\t\t}\n\t}\n\n\t$scope.closeSearchModal = function(){\n\t\t$( \"#searchContainerForm\" ).css( { \n\t\t\t'display' : 'none'\n\t\t} )\t\n\t}\n\n\n}]);\r\nyamba.App .controller('TopNavController', ['$scope', '$state',\n\t\t\t\t\t\t\t\t\t\t\tfunction( $scope, $state ) {\n\n\t$scope.showLeftMenuCanvas = function(){\n\t\tvar leftMenuCanvas = $( \"#leftMenuCanvas\" ), mainAppCanvas = $( \"#mainAppCanvas\" );\n\n\t\tif( leftMenuCanvas.hasClass( \"leftMenuCanvasHidden\" ) ){ // show\n\t\t\tleftMenuCanvas.removeClass( \"leftMenuCanvasHidden\" );\n\t\t\tmainAppCanvas.addClass( \"mainAppCanvasVisible\" );\n\t\t}\n\t\telse{ // hide\n\t\t\tleftMenuCanvas.addClass( \"leftMenuCanvasHidden\" );\n\t\t\tmainAppCanvas.removeClass( \"mainAppCanvasVisible\" );\n\t\t}\n\n\t}\n\n\t$scope.showTrendingModal = function(){\n\t\t$( \"#trendingContainerForm\" ).css( {\n\t\t\tdisplay : 'block'\n\t\t} );\n\t}\n\n\t$scope.showSearchForm = function(){\n\t\t$( \"#searchContainerForm\" ).css( {\n\t\t\t'display' : 'block'\n\t\t} );\n\n\t\t$( \"#searchFormInput\" ).focus()\n\t}\n\n\t$scope.showNewPostModal = function(){\n\t\t\n\t\t$( \"#uploadMediaStep3\" ).css( { 'display':'none' } );\n\t\t$( \"#uploadMediaStep2\" ).css( { 'display':'none' } );\n\t\t$( \"#uploadMediaStep1\" ).css( { 'display':'block' } );\n\t\t$( \"#newPostContainer\" ).css( { \n\t\t\t'display' : 'block'\t\n\t\t} );\t\n\t}\n\n}]);\r\nyamba.App .controller('TrendingModalController', ['$scope', '$state', \"FeedServices\",\n\t\t\t\t\t\t\t\t\t\t\tfunction( $scope, $state, FeedServices ) {\n\n\t$scope.current_filter = 'today';\n\t$scope.loadingTrend = false;\n\t$scope.trending = [];\n\tvar trendOffset = 0;\n\n\t$scope.closeTrendingModal = function() {\n\t\t$( \"#trendingContainerForm\" ).css( {\n\t\t\tdisplay : 'none'\n\t\t} );\n\t}\n\n\t$scope.changeTrending = function( filter ){\n\t\t$scope.trending = [];\n\t\ttrendOffset = 0;\n\t\tshowTrending( { \n\t\t\tcreation_date : filter\n\t\t} );\n\t} \n\n\n\t$scope.showMoreTrending = function(){\n\t\ttrendOffset++;\n\t\tshowTrending( $scope.current_filter, true );\n\t}\n\n\t/**\n\t * @param\n\t *\tString filter |today|week|month|\n\t */\n\tshowTrending = function( filter, append ){\n\t\tappend = !!append;\n\t\tvar param = angular.extend( {\n\t\t\tcreation_date : 'today',\n\t\t\toffset : trendOffset\n\t\t}, filter );\n\n\t\t$scope.current_filter = param.creation_date;\n\t\t$scope.loadingTrend = true;\n\t\tFeedServices.getFeedsTrending( param, function( response ) {\n\t\t\tif( append ){\n\t\t\t\t$scope.trending.merge( response.Activity_Feed )\n\t\t\t}else{\n\t\t\t\t$scope.trending = response.Activity_Feed;\n\t\t\t}\n\t\t\t$scope.loadingTrend = false;\n\t\t} )\n\t}\n\n\t\n\t// init\n\tshowTrending( { \n\t\tcreation_date : 'today'\n\t} );\n\n\n}]);\r\nyamba.App.controller( \"ActivityFeedController\", [ \"$scope\", \"$stateParams\", \"FeedServices\", \n\t\t\t\t\t\t\t\t\t\t\t\tfunction( $scope, $stateParams, FeedServices ) {\n\t$scope.$parent.App.title = \"Activity Feed\";\n\n\t$scope.activity_feed_filter = {};\n\n\tif( typeof $stateParams.box_id != \"undefined\" ){\n\t\t$scope.activity_feed_filter = {\n\t\t\tcircle_id : $stateParams.box_id\n\t\t}\n\t}\n\n} ] );\r\nyamba.App\n.controller('AddGroupController', ['$scope', 'close', function($scope, close) {\n\n  $scope.display = true;\n\n  $scope.close = function() {\n    $scope.display = false;\n \t  close();\n };\n\n}]);\r\nyamba.App.controller( \"AppController\", [ \"$scope\", \"$state\", \"UserServices\", \"BoxServices\", \n\t\t\t\t\t\t\t\t\tfunction( $scope, $state, UserServices, BoxServices ) {\n\n\t$scope.App = {\n\t\ttitle : \"Welcome test\",\n\t\tuser : {}\n\t};\n\n\t// for global variable\n\t$scope.Constant = {\n\t\tboxes : []\t\n\t}\n\n\tBoxServices.getBox( function( response ) {\n\t\t$scope.Constant.boxes = response.Box;\n\t} )\n\n\n\n\tif( UserServices.isLogin() ){\n\t\t$scope.App.user = UserServices.getLoginUser();\n\t}\n\n\t$scope.logout = function( ){\n\t\tUserServices.logout();\n\t\t$state.go('login');\n\t}\n\n\t\n\n\n\n} ] );\r\nyamba.App\n.controller('CollectionsController', ['$scope','$stateParams','UserServices','FollowServices','profile_cover','FavoServices',function($scope,$stateParams,UserServices,FollowServices,profile_cover,FavoServices){\n\t$scope.user_data = {};\n\t$scope.random_cover = profile_cover.cover;\n\tconsole.log(profile_cover.cover);\n\t$scope.favos = new FavoServices.fetchFavoUser;\n\t$scope.follow = [\n\t\tmy_profile = false,\n\t\tfollow_status = ''\n\t];\n\t\n\tUserServices.profile(\n\t\t{\n\t\t\tmethod : 'fetchByUsername',\n    \t\tusername : $stateParams.username\n\t\t},\n\t\tfunction(response){\n\t\t\tvar data = response.data.User;\n\t\t\t\n\t\t\tvar my_profile = false;\n\n\t\t\t$scope.user_data = data;\n\n\t\t\tif($scope.$parent.App.user.user_id == data.user_id){\n\t\t\t\tmy_profile =  true;\n\t\t\t\t$scope.follow.my_profile = my_profile;\n\t\t\t\t$scope.follow.follow_status = '';\n\t\t\t}\n\t\t\telse{\n\t\t\t\tFollowServices.checkFollowStatus(\n\t\t\t\t\t$scope.user_data.user_id,\n\t\t\t\t\tfunction(response){\n\t\t\t\t\t\tif(profile_cover.id != data.user_id){\n\t\t\t\t\t\t\tprofile_cover.cover = null;\n\t\t\t\t\t\t\tprofile_cover.id = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar response = response.data[ 0 ].Follow;\n                \t\tvar status = FollowServices.followStatus( response.is_followed, response.pending_approval );\n                \t\t$scope.follow.my_profile = my_profile;\n\t\t\t\t\t\t$scope.follow.follow_status = status;\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tUserServices.profile(\n\t\t\t\t{\n\t\t\t\t\tmethod : 'fetchPosts',\n\t\t\t\t    offset : 0,\n\t\t\t\t    user_id : data.user_id\n\t\t\t\t},\n\t\t\t\tfunction(response){\n\t\t\t\t\tif(profile_cover.cover == null){\n\t\t\t\t\t\tvar new_cover = response.data.cover_photo;\n\t\t\t\t\t\tprofile_cover.cover = new_cover;\n\t\t\t\t\t\tprofile_cover.id = data.user_id;\n\t\t\t\t\t\t$scope.random_cover = new_cover;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$scope.random_cover = profile_cover.cover;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t);\n}]);\r\nyamba.App\n.controller('CommentController', ['$scope','close','project_id','scope_ctr','CommentServices', function($scope, close,project_id,scope_ctr, CommentServices) {\n\n  \t$scope.display = true;\n\t$scope.hasMoreComment = false;\n\t$scope.comments = [];\n\n\tvar current_page = 0; // paging start to zero\n\tvar loadComments = function(){\n\t\tCommentServices.fetchComments( {\n\t\t\tproject_id : project_id, \n\t\t\tpage : current_page }, function( response ) {\n\t\t\tvar data = response.data;\n\t\t\tfor( var i = 0; i < $scope.comments.length; i++ ){\n\t\t\t\tdata.push( $scope.comments[ i ] );\n\t\t\t}\n\n\t\t\t$scope.comments = data;\n\t\t\tif( current_page >= response.total_pager ){\n\t\t\t\t$scope.hasMoreComment = false;\n\t\t\t}\n\t\t\telse{\n\t\t\t\t$scope.hasMoreComment = true;\n\t\t\t}\n\t\t\tcurrent_page++;\n\n\t\t})\n\t}\n\tloadComments(); // init first comments\n\t$scope.loadMoreComment = function(){\n\t\tconsole.log( 'loading more comments' );\n\t\tloadComments();\n\t}\n\n\n\tvar comment_form_processing = false;\n\n\t$scope.submitComment = function( form ){\n\n\t\tif( form.$valid && !comment_form_processing ){\n\n\t\t\tcomment_form_processing = true;\n\t\t\tCommentServices.createComment( {\n\n\t\t\t\tproject_id : project_id,\n\t\t\t\tbody : $scope.form.comment.body\n\n\t\t\t}, function( response ) {\n\n\t\t\t\t$scope.form.comment.body = \"\";\n\t\t\t\t$scope.comments.push( response.data );\n\t\t\t\tvar queryElement = document.querySelectorAll('article');\n\t\t\t\tvar target = angular.element(queryElement[scope_ctr]).find('.itemComments');\n\t\t\t\tvar count =  $scope.comments.length;\n\t\t\t\tconsole.log(count);\n\t\t\t\ttarget.html(count);\n\t\t\t\tconsole.log( ' -- newly added --', $scope.comments );\n\t\t\t\tcomment_form_processing = false;\n\n\t\t\t} )\n\n\t\t}\n\t}\n\n\t$scope.close = function() {\n\t    $scope.display = false;\n\t \tclose();\n\t};\n\n}]);\r\nyamba.App.controller( \"FavoController\", [ \"$scope\",\"$timeout\", \"$stateParams\", \"FavoServices\", \n\t\t\t\t\t\t\t\t\t\tfunction( $scope, $timeout, $stateParams, FavoServices ) {\n\t$scope.$parent.App.title = \"Favo\";\n\t$scope.favo = {};\n\n\t$scope.favoFilter = {\n\t\tfavcircle_id : $stateParams.favo_id\n\t}\n\n\tFavoServices.fetchSpecificFavo( {\n\t\tfavcircle_id : $stateParams.favo_id\n\t}, function( response ) {\n\t\t$scope.favo = response.data.Favo;\n\t} )\n\n} ] );\r\nyamba.App.controller( \"FeaturedController\", [ \"$scope\",\"$timeout\", \"FeedServices\", function( $scope, $timeout, FeedServices ) {\n\t$scope.$parent.App.title = \"Featured\";\n\t\n} ] );\r\nyamba.App\n.controller('FollowerController', ['$scope','$stateParams','UserServices','FollowServices','profile_cover','follower_id','FollowerFactory',function($scope,$stateParams,UserServices,FollowServices,profile_cover,follower_id,FollowerFactory){\n\n\t$scope.user_data = {};\n\t$scope.current_id = follower_id;\n\t$scope.random_cover = profile_cover.cover;\n\tconsole.log(profile_cover.cover);\n\t$scope.follow = [\n\t\tmy_profile = false,\n\t\tfollow_status = ''\n\t];\n\t$scope.follows = 0;\n\t$scope.title = 'Following';\n\t$scope.follow_service = new FollowerFactory;\n\tconsole.log('Follow Services');\n\tconsole.log($scope.follow_service);\n\t$scope.fetch_method = 'fetchFollowers';\n\t\n\tUserServices.profile(\n\t\t{\n\t\t\tmethod : 'fetchByUsername',\n    \t\tusername : $stateParams.username\n\t\t},\n\t\tfunction(response){\n\t\t\tvar data = response.data.User;\n\t\t\t\n\t\t\tvar my_profile = false;\n\n\t\t\t$scope.user_data = data;\n\n\t\t\tif($scope.$parent.App.user.user_id == data.user_id){\n\t\t\t\tmy_profile =  true;\n\t\t\t\t$scope.follow.my_profile = my_profile;\n\t\t\t\t$scope.follow.follow_status = '';\n\t\t\t}\n\t\t\telse{\n\t\t\t\tFollowServices.checkFollowStatus(\n\t\t\t\t\t$scope.user_data.user_id,\n\t\t\t\t\tfunction(response){\n\t\t\t\t\t\tif(profile_cover.id != data.user_id){\n\t\t\t\t\t\t\tprofile_cover.cover = null;\n\t\t\t\t\t\t\tprofile_cover.id = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar response = response.data[ 0 ].Follow;\n                \t\tvar status = FollowServices.followStatus( response.is_followed, response.pending_approval );\n                \t\t$scope.follow.my_profile = my_profile;\n\t\t\t\t\t\t$scope.follow.follow_status = status;\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tUserServices.profile(\n\t\t\t\t{\n\t\t\t\t\tmethod : 'fetchPosts',\n\t\t\t\t    offset : 0,\n\t\t\t\t    user_id : data.user_id\n\t\t\t\t},\n\t\t\t\tfunction(response){\n\t\t\t\t\tif(profile_cover.cover == null){\n\t\t\t\t\t\tvar new_cover = response.data.cover_photo;\n\t\t\t\t\t\tprofile_cover.cover = new_cover;\n\t\t\t\t\t\tprofile_cover.id = data.user_id;\n\t\t\t\t\t\t$scope.random_cover = new_cover;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$scope.random_cover = profile_cover.cover;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\n\t\t\t// $scope.follow_service = new FollowServices.fetchFollowers;\n\t\t}\n\t);\n}]);\r\nyamba.App\n.controller('FollowerController', ['$scope','$stateParams','UserServices','FollowServices','profile_cover','follower_id','FollowerFactory',function($scope,$stateParams,UserServices,FollowServices,profile_cover,follower_id,FollowerFactory){\n\n\t$scope.user_data = {};\n\t$scope.current_id = follower_id;\n\t$scope.random_cover = profile_cover.cover;\n\tconsole.log(profile_cover.cover);\n\t$scope.follow = [\n\t\tmy_profile = false,\n\t\tfollow_status = ''\n\t];\n\t$scope.follows = 0;\n\t$scope.title = 'Following';\n\t$scope.follow_service = new FollowerFactory;\n\tconsole.log('Follow Services');\n\tconsole.log($scope.follow_service);\n\t$scope.fetch_method = 'fetchFollowers';\n\t\n\tUserServices.profile(\n\t\t{\n\t\t\tmethod : 'fetchByUsername',\n    \t\tusername : $stateParams.username\n\t\t},\n\t\tfunction(response){\n\t\t\tvar data = response.data.User;\n\t\t\t\n\t\t\tvar my_profile = false;\n\n\t\t\t$scope.user_data = data;\n\n\t\t\tif($scope.$parent.App.user.user_id == data.user_id){\n\t\t\t\tmy_profile =  true;\n\t\t\t\t$scope.follow.my_profile = my_profile;\n\t\t\t\t$scope.follow.follow_status = '';\n\t\t\t}\n\t\t\telse{\n\t\t\t\tFollowServices.checkFollowStatus(\n\t\t\t\t\t$scope.user_data.user_id,\n\t\t\t\t\tfunction(response){\n\t\t\t\t\t\tif(profile_cover.id != data.user_id){\n\t\t\t\t\t\t\tprofile_cover.cover = null;\n\t\t\t\t\t\t\tprofile_cover.id = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar response = response.data[ 0 ].Follow;\n                \t\tvar status = FollowServices.followStatus( response.is_followed, response.pending_approval );\n                \t\t$scope.follow.my_profile = my_profile;\n\t\t\t\t\t\t$scope.follow.follow_status = status;\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tUserServices.profile(\n\t\t\t\t{\n\t\t\t\t\tmethod : 'fetchPosts',\n\t\t\t\t    offset : 0,\n\t\t\t\t    user_id : data.user_id\n\t\t\t\t},\n\t\t\t\tfunction(response){\n\t\t\t\t\tif(profile_cover.cover == null){\n\t\t\t\t\t\tvar new_cover = response.data.cover_photo;\n\t\t\t\t\t\tprofile_cover.cover = new_cover;\n\t\t\t\t\t\tprofile_cover.id = data.user_id;\n\t\t\t\t\t\t$scope.random_cover = new_cover;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$scope.random_cover = profile_cover.cover;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\n\t\t\t// $scope.follow_service = new FollowServices.fetchFollowers;\n\t\t}\n\t);\n}]);\r\nyamba.App\n.controller('FollowingController', ['$scope','$stateParams','UserServices','FollowServices','profile_cover','FollowerFactory',function($scope,$stateParams,UserServices,FollowServices,profile_cover,FollowerFactory){\n\t$scope.user_data = {};\n\t$scope.current_id = 0;\n\t$scope.random_cover = profile_cover.cover;\n\tconsole.log(profile_cover.cover);\n\t$scope.follow = [\n\t\tmy_profile = false,\n\t\tfollow_status = ''\n\t];\n\t$scope.follows = 0;\n\t$scope.title = 'Following';\n\t$scope.follow_service = new FollowerFactory;\n\t$scope.fetch_method = 'fetchFollowing';\n\n\tUserServices.profile(\n\t\t{\n\t\t\tmethod : 'fetchByUsername',\n    \t\tusername : $stateParams.username\n\t\t},\n\t\tfunction(response){\n\t\t\tvar data = response.data.User;\n\t\t\t\n\t\t\tvar my_profile = false;\n\n\t\t\t$scope.user_data = data;\n\t\t\t$scope.current_id = data.user_id;\n\n\t\t\tif($scope.$parent.App.user.user_id == data.user_id){\n\t\t\t\tmy_profile =  true;\n\t\t\t\t$scope.follow.my_profile = my_profile;\n\t\t\t\t$scope.follow.follow_status = '';\n\t\t\t}\n\t\t\telse{\n\t\t\t\tFollowServices.checkFollowStatus(\n\t\t\t\t\t$scope.user_data.user_id,\n\t\t\t\t\tfunction(response){\n\t\t\t\t\t\tif(profile_cover.id != data.user_id){\n\t\t\t\t\t\t\tprofile_cover.cover = null;\n\t\t\t\t\t\t\tprofile_cover.id = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar response = response.data[ 0 ].Follow;\n                \t\tvar status = FollowServices.followStatus( response.is_followed, response.pending_approval );\n                \t\t$scope.follow.my_profile = my_profile;\n\t\t\t\t\t\t$scope.follow.follow_status = status;\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tUserServices.profile(\n\t\t\t\t{\n\t\t\t\t\tmethod : 'fetchPosts',\n\t\t\t\t    offset : 0,\n\t\t\t\t    user_id : data.user_id\n\t\t\t\t},\n\t\t\t\tfunction(response){\n\t\t\t\t\tif(profile_cover.cover == null){\n\t\t\t\t\t\tvar new_cover = response.data.cover_photo;\n\t\t\t\t\t\tprofile_cover.cover = new_cover;\n\t\t\t\t\t\tprofile_cover.id = data.user_id;\n\t\t\t\t\t\t$scope.random_cover = new_cover;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$scope.random_cover = profile_cover.cover;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t);\n}]);\r\nyamba.App\n.controller('FollowingController', ['$scope','$stateParams','UserServices','FollowServices','profile_cover','FollowerFactory',function($scope,$stateParams,UserServices,FollowServices,profile_cover,FollowerFactory){\n\t$scope.user_data = {};\n\t$scope.current_id = 0;\n\t$scope.random_cover = profile_cover.cover;\n\tconsole.log(profile_cover.cover);\n\t$scope.follow = [\n\t\tmy_profile = false,\n\t\tfollow_status = ''\n\t];\n\t$scope.follows = 0;\n\t$scope.title = 'Following';\n\t$scope.follow_service = new FollowerFactory;\n\t$scope.fetch_method = 'fetchFollowing';\n\n\tUserServices.profile(\n\t\t{\n\t\t\tmethod : 'fetchByUsername',\n    \t\tusername : $stateParams.username\n\t\t},\n\t\tfunction(response){\n\t\t\tvar data = response.data.User;\n\t\t\t\n\t\t\tvar my_profile = false;\n\n\t\t\t$scope.user_data = data;\n\t\t\t$scope.current_id = data.user_id;\n\n\t\t\tif($scope.$parent.App.user.user_id == data.user_id){\n\t\t\t\tmy_profile =  true;\n\t\t\t\t$scope.follow.my_profile = my_profile;\n\t\t\t\t$scope.follow.follow_status = '';\n\t\t\t}\n\t\t\telse{\n\t\t\t\tFollowServices.checkFollowStatus(\n\t\t\t\t\t$scope.user_data.user_id,\n\t\t\t\t\tfunction(response){\n\t\t\t\t\t\tif(profile_cover.id != data.user_id){\n\t\t\t\t\t\t\tprofile_cover.cover = null;\n\t\t\t\t\t\t\tprofile_cover.id = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar response = response.data[ 0 ].Follow;\n                \t\tvar status = FollowServices.followStatus( response.is_followed, response.pending_approval );\n                \t\t$scope.follow.my_profile = my_profile;\n\t\t\t\t\t\t$scope.follow.follow_status = status;\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tUserServices.profile(\n\t\t\t\t{\n\t\t\t\t\tmethod : 'fetchPosts',\n\t\t\t\t    offset : 0,\n\t\t\t\t    user_id : data.user_id\n\t\t\t\t},\n\t\t\t\tfunction(response){\n\t\t\t\t\tif(profile_cover.cover == null){\n\t\t\t\t\t\tvar new_cover = response.data.cover_photo;\n\t\t\t\t\t\tprofile_cover.cover = new_cover;\n\t\t\t\t\t\tprofile_cover.id = data.user_id;\n\t\t\t\t\t\t$scope.random_cover = new_cover;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$scope.random_cover = profile_cover.cover;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t);\n}]);\r\nyamba.App.controller( \"GroupController\", [ \"$scope\", \"$stateParams\", \"$state\", \"BoxServices\",\n\t\t\t\t\t\t\t\t\tfunction( $scope, $stateParams, $state, BoxServices ) {\n\t\n\tif( $scope.$parent.Constant.boxes.length == 0 ){\n\t\t$state.go( 'main.activity_feed' );\n\t\treturn;\n\t}\n\n\tvar group_index = $scope.$parent.Constant.boxes.getIndexByKeyVal( 'circle_id', $stateParams.box_id)\n\t$scope.$parent.App.title = \"Groups\";\n\n\t$scope.box_users = []\n\t$scope.edit_group = false;\n\t$scope.current_box = {};\n\t$scope.box_name = $scope.$parent.Constant.boxes[ group_index ].title;\n\n\n\tBoxServices.getUserBox( {\n\t\tcircle_id : $stateParams.box_id\t\n\t}, function( response ) {\n\t\t$scope.box_users = response.data;\n\t} )\n\n\t$scope.saveGroupName = function(){\n\t\tBoxServices.editBox( {\n\t\t\tcircle_id : $stateParams.box_id,\n\t\t\ttitle : $scope.box_name\n\t\t}, function( response ) {\n\t\t\t$scope.edit_group = false;\n\t\t\t$scope.$parent.Constant.boxes[ group_index ].title = response.data.title;\n\t\t} )\n\t}\n\n\n\t$scope.addRemoveUserInBox = function( user_id, index ){\n\n\t\tif( !confirm( \"Are you sure you want to delete this?\") ) return;\n\n\t\tBoxServices.addRemoveUserInBox( {\n\t\t\tcircle_id : $stateParams.box_id,\n\t\t\tuser_id : user_id\t\n\t\t}, function( response ) {\n\t\t\tif( response.data.message == \"Removed\"){\n\t\t\t\t$scope.box_users.splice( index, 1 );\n\t\t\t}\n\n\t\t} )\n\n\t}\n\n} ] );\r\nyamba.App.controller( \"HashtagController\", [ \"$scope\", \"$timeout\", '$stateParams','HashtagServices', function( $scope, $timeout, $stateParams,HashtagServices ) {\n\t$scope.$parent.App.title = \"Hashtag\";\n\t$scope.hashtag = $stateParams.hashtag;\n\t\n\t$scope.filterHashtag = {\n\t\ttext  : $stateParams.hashtag\n\t};\n\n\t$scope.hashtag_info = null\n\n\t$scope.headerBg = '';\n\t$scope.afterFinish = function( feeds ){\n\t\t// get first image for header background\n\t\tif( typeof feeds[ 0 ] != \"undefined\" ){\n\t\t\t$scope.headerBg = feeds[ 0 ].Media.storage_path\n\t\t}\n\t}\n\n\t$scope.hashtagFollow = function(id){\n\t\tdata = {\n\t\t\ttag_id : id\n\t\t};\n\t\tHashtagServices.followUnfollowHashtag(\n\t\t\tdata,\n\t\t\tfunction(response){\n\t\t\t\t// console.log(response);\n\t\t\t\tvar target = document.getElementById(\"follow-hashtag\");\n\t\t\t\tvar message = \"Follow\";\n\t\t\t\tif(response.data.message == \"Followed\"){\n\t\t\t\t\tvar message = \"Unfollow\";\n\t\t\t\t}\n\t\t\t\tangular.element(target).html(message);\n\t\t\t},\n\t\t\tfunction(){}\n\t\t);\n\t}\n\n\tHashtagServices.getHashtagInfo(\n\t\t$stateParams.hashtag,\n\t\tfunction(response){\n\t\t\t$scope.hashtag_info = response.data.Hashtag;\n\t\t\tif(response.data.Hashtag.is_followed == 0){\n\t\t\t\t$scope.hashtag_info.message = \"Follow\";\n\t\t\t}\n\t\t\telse{\n\t\t\t\t$scope.hashtag_info.message = \"Unfollow\";\n\t\t\t}\n\t\t}\n\t);\n\n\t\n} ] );\r\nyamba.App\n.controller('LikesController', ['$scope','$stateParams','UserServices','FollowServices','profile_cover',function($scope,$stateParams,UserServices,FollowServices,profile_cover){\n\t$scope.user_data = {};\n\t$scope.random_cover = profile_cover.cover;\n\tconsole.log(profile_cover.cover);\n\t$scope.follow = [\n\t\tmy_profile = false,\n\t\tfollow_status = ''\n\t];\n\t$scope.filterUser = {\n\t\tusername : $stateParams.username\n\t};\n\tUserServices.profile(\n\t\t{\n\t\t\tmethod : 'fetchByUsername',\n    \t\tusername : $stateParams.username\n\t\t},\n\t\tfunction(response){\n\t\t\tvar data = response.data.User;\n\t\t\t\n\t\t\tvar my_profile = false;\n\n\t\t\t$scope.user_data = data;\n\n\t\t\tif($scope.$parent.App.user.user_id == data.user_id){\n\t\t\t\tmy_profile =  true;\n\t\t\t\t$scope.follow.my_profile = my_profile;\n\t\t\t\t$scope.follow.follow_status = '';\n\t\t\t}\n\t\t\telse{\n\t\t\t\tFollowServices.checkFollowStatus(\n\t\t\t\t\t$scope.user_data.user_id,\n\t\t\t\t\tfunction(response){\n\t\t\t\t\t\tif(profile_cover.id != data.user_id){\n\t\t\t\t\t\t\tprofile_cover.cover = null;\n\t\t\t\t\t\t\tprofile_cover.id = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar response = response.data[ 0 ].Follow;\n                \t\tvar status = FollowServices.followStatus( response.is_followed, response.pending_approval );\n                \t\t$scope.follow.my_profile = my_profile;\n\t\t\t\t\t\t$scope.follow.follow_status = status;\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tUserServices.profile(\n\t\t\t\t{\n\t\t\t\t\tmethod : 'fetchPosts',\n\t\t\t\t    offset : 0,\n\t\t\t\t    user_id : data.user_id\n\t\t\t\t},\n\t\t\t\tfunction(response){\n\t\t\t\t\tif(profile_cover.cover == null){\n\t\t\t\t\t\tvar new_cover = response.data.cover_photo;\n\t\t\t\t\t\tprofile_cover.cover = new_cover;\n\t\t\t\t\t\tprofile_cover.id = data.user_id;\n\t\t\t\t\t\t$scope.random_cover = new_cover;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$scope.random_cover = profile_cover.cover;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t);\n}]);\r\nyamba.App.controller( \"LoginController\", [ \"$scope\", \"$timeout\", \"$location\", \"UserServices\", function( $scope, $timeout, $location, UserServices ) {\n\t$scope.$parent.App.title = \"Login\";\n\n\tif( UserServices.isLogin() ){\n\t\t$location.path( \"/main/activity-feed\" );\n\t}\n\n\t$scope.authenticate = function( form ){\n\t\tif( form.$valid ){\n\t\t\tUserServices.login( $scope.username, $scope.password, function( response ) {\n\t\t\t\t$scope.$parent.App.user = response.User;\n\t\t\t\t// console.log(response);\n\t\t\t\t$location.path( \"/main/activity-feed\" );\n\t\t\t}, function( response ) {\n\t\t\t\t$scope.errorMsg = response.error[ 0 ];\n\t\t\t} )\n\t\t}\n\t}\n\t\n} ] );\r\nyamba.App.controller( \"NotificationController\", [ \"$scope\", \"$state\", \"$timeout\", \"$stateParams\", \"NotificationServices\", \n\t\t\t\t\t\t\t\t\t\t\tfunction( $scope, $state, $timeout, $stateParams, NotificationServices ) {\n\n\t$scope.$parent.App.title = \"Notification\";\n\t$scope.notifications = [];\n\tvar currentOffset = 1;\n\n\t$scope.notification_type = $stateParams.type;\n\n\tvar getNotification = function( type ){\n\n\t\tif( type == \"request\" ) {\n\n\t\t\tNotificationServices.requestNotification( {\n\t\t\t\toffset : currentOffset\n\t\t\t}, function( response ) {\n\t\t\t\t$scope.notifications.merge( response.yamba );\n\t\t\t} )\n\n\t\t}\n\t\telse{\n\t\t\t\n\t\t\tNotificationServices.generalNotification( {\n\t\t\t\toffset : currentOffset\n\t\t\t}, function( response ) {\n\t\t\t\t$scope.notifications.merge( response.yamba );\n\t\t\t} )\n\n\t\t}\n\n\t}\t\n\n\tgetNotification( $stateParams.type );\n\n\t$( window ).scroll( function( event ){\n\t\tvar scrollBottom = $( document ).height() - $( window ).height() - $( window ).scrollTop();\n\t\tif( scrollBottom == 0 ){\t\n\n\t\t\tif( $state.is('main.notification') ) {\n\t\t\t\tcurrentOffset++;\n\t\t\t\tgetNotification( $stateParams.type );\n\t\t\t}\n\n\t\t}\n\t} );\n\n\n\t\n} ] );\r\nyamba.App.controller( \"PostViewController\", [ \"$scope\", \"$stateParams\", \"$timeout\", \"FeedServices\", \"FavoServices\", \"CommentServices\", \"LikeServices\", \"FollowServices\", \"ModalService\", \"UserServices\",\n\t\t\t\t\t\t\t\t\t\t\tfunction( $scope, $stateParams, $timeout, FeedServices, FavoServices, CommentServices, LikeServices, FollowServices, ModalService, UserServices ) {\n\n\t$scope.project_id = $stateParams.project_id;\n\t$scope.hasMoreComment = false;\n\t$scope.comments = [];\n\t$scope.post_data = {};\n\t$scope.follow = {};\n\t$scope.isOwner = true;\n\n\t$timeout( function( ) {\n\t\t $( document ).scrollTop(0);\t\n\t} ); // make sure it scroll to the top\n\n\n\tvar owner = UserServices.getLoginUser();\n\n\tvar showModalBox = function( user ){\n\n\t\tModalService.showModal( {\n\t      \ttemplateUrl: \"app/views/modal/box.php\",\n\t      \tcontroller: \"ModalBoxController\",\n\t      \tinputs : {\n\t      \t\tuser : user\n\t      \t}\n\t    } ).then( function( modal ) {\n\t      modal.close.then( function( result ) {\n\n\t      } );\n\t    } );\n\n\t}\n\n\tvar checkFollowStatus = function( user ){\n\t\t/*** check if owner ***/\n\t\tif( owner.user_id != user.user_id ){\n\t\t\t$scope.isOwner = false;\n\t\t}\n\n\t\tFollowServices.checkFollowStatus( user.user_id, function( response ) {\n\t\t\t$scope.follow = response.data[ 0 ].Follow;\n\t\t\t$scope.follow.status_string = FollowServices.followStatus( $scope.follow.is_followed, $scope.follow.pending_approval );\n\t\t} );\n\t}\n\n\tFeedServices.getFeedByProjectId( $scope.project_id, function( response ) {\n\t\t$scope.post_data = response.data.Posts[0];\n\t\tcheckFollowStatus( response.data.Posts[ 0 ].User );\n\t} )\n\n\t/*************** author meta ******************/\n\n\t$scope.unfollowFollow = function(){\n\t\tFollowServices.followUnfollow( $scope.post_data.User.user_id, function( response ) {\n\t\t\t$scope.follow.status_string = FollowServices.followStatus( response.is_followed, response.pending_approval );\t\n\n\t\t\tif( response.is_followed == 1 && response.pending_approval == 0 ){\n\t\t\t\tshowModalBox( response.Users );\t\n\t\t\t}\n\n\t\t} )\n\t}\n\n\t/*************** author meta ******************/\n\n\n\t/*************** media action ****************/\n\n\t$scope.likeUnliked = function() {\n\t\tLikeServices.likeUnliked( $stateParams.project_id, function( response ){\n\t\t\tif( response.data.islike ){\n\t\t\t\t$scope.post_data.is_liked = 1;\n\t\t\t}\n\t\t\telse{\n\t\t\t\t$scope.post_data.is_liked = 0;\n\t\t\t}\n\t\t} )\n\t}\n\n\t$scope.addCollection = function() {\n\n\t\tModalService.showModal( {\n\t      \ttemplateUrl: \"app/views/modal/collecton.php\",\n\t      \tcontroller: \"ModalCollectionController\",\n\t      \tinputs : {\n\t      \t\tpost : $scope.post_data\n\t      \t}\n\t    } ).then( function( modal ) {\n\t      modal.close.then( function( result ) {\n\n\t      } );\n\t    } );\n\t\t\n\t}\n\n\t$scope.sharePost = function(){\n\n\t\tModalService.showModal( {\n\t      \ttemplateUrl: \"app/views/modal/repost.php\",\n\t      \tcontroller: \"ModalRepostController\",\n\t      \tinputs : {\n\t      \t\tpost : $scope.post_data\n\t      \t}\n\t    } ).then( function( modal ) {\n\t      modal.close.then( function( result ) {\n\n\t      } );\n\t    } );\n\n\t}\n\n\t/*************** media action ****************/\n\n\t/*************** comment *********************/\n\tvar current_page = 0; // paging start to zero\n\tvar loadComments = function(){\n\t\tCommentServices.fetchComments( {\n\t\t\tproject_id : $scope.project_id, \n\t\t\tpage : current_page }, function( response ) {\n\t\t\tvar data = response.data;\n\t\t\tfor( var i = 0; i < $scope.comments.length; i++ ){\n\t\t\t\tdata.push( $scope.comments[ i ] );\n\t\t\t}\n\n\t\t\t$scope.comments = data;\n\t\t\tif( current_page >= response.total_pager ){\n\t\t\t\t$scope.hasMoreComment = false;\n\t\t\t}\n\t\t\telse{\n\t\t\t\t$scope.hasMoreComment = true;\n\t\t\t}\n\t\t\tcurrent_page++;\n\n\t\t})\n\t}\n\tloadComments(); // init first comments\n\t$scope.loadMoreComment = function(){\n\t\tconsole.log( 'loading more comments' );\n\t\tloadComments();\n\t}\n\n\n\tvar comment_form_processing = false;\n\n\t$scope.submitComment = function( form ){\n\n\t\tif( form.$valid && !comment_form_processing ){\n\n\t\t\tcomment_form_processing = true;\n\t\t\tCommentServices.createComment( {\n\n\t\t\t\tproject_id : $scope.project_id,\n\t\t\t\tbody : $scope.form.comment.body\n\n\t\t\t}, function( response ) {\n\n\t\t\t\t$scope.form.comment.body = \"\";\n\t\t\t\t$scope.comments.push( response.data );\n\t\t\t\tconsole.log( ' -- newly added --', $scope.comments );\n\t\t\t\tcomment_form_processing = false;\n\n\t\t\t} )\n\n\t\t}\n\t}\n\t/*************** comment *********************/\n\n\n\t/*************** related favos and projects *********************/\n\tFavoServices.relatedFavos( $scope.project_id, function( response ) {\n\t\t$scope.related_favos = response.RelatedFavo;\n\t} )\n\n\tFeedServices.relatedPost( $scope.project_id, function( response ) {\n\t\t$scope.related_projects = response.RelatedPost\n\t} )\n\t/*************** related favos and projects *********************/\n\n} ] );\r\nyamba.App\n.controller('ProfileController', ['$scope','$stateParams','$timeout','UserServices','FollowServices','ModalService','profile_cover',function($scope,$stateParams,$timeout,UserServices,FollowServices,ModalService,profile_cover){\n\t$scope.user_data = {};\n\t$scope.random_cover = profile_cover.cover;\n\tconsole.log(profile_cover.cover);\n\t$scope.follow = [\n\t\tmy_profile = false,\n\t\tfollow_status = ''\n\t];\n\t$scope.filterUser = {\n\t\tusername : $stateParams.username\n\t};\n\n\tUserServices.profile(\n\t\t{\n\t\t\tmethod : 'fetchByUsername',\n    \t\tusername : $stateParams.username\n\t\t},\n\t\tfunction(response){\n\t\t\tvar data = response.data.User;\n\t\t\t\n\t\t\tvar my_profile = false;\n\n\t\t\t$scope.user_data = data;\n\n\t\t\tif($scope.$parent.App.user.user_id == data.user_id){\n\t\t\t\tmy_profile =  true;\n\t\t\t\t$scope.follow.my_profile = my_profile;\n\t\t\t\t$scope.follow.follow_status = '';\n\t\t\t}\n\t\t\telse{\n\t\t\t\tFollowServices.checkFollowStatus(\n\t\t\t\t\t$scope.user_data.user_id,\n\t\t\t\t\tfunction(response){\n\t\t\t\t\t\tif(profile_cover.id != data.user_id){\n\t\t\t\t\t\t\tprofile_cover.cover = null;\n\t\t\t\t\t\t\tprofile_cover.id = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar response = response.data[ 0 ].Follow;\n                \t\tvar status = FollowServices.followStatus( response.is_followed, response.pending_approval );\n                \t\t$scope.follow.my_profile = my_profile;\n\t\t\t\t\t\t$scope.follow.follow_status = status;\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tUserServices.profile(\n\t\t\t\t{\n\t\t\t\t\tmethod : 'fetchPosts',\n\t\t\t\t    offset : 0,\n\t\t\t\t    user_id : data.user_id\n\t\t\t\t},\n\t\t\t\tfunction(response){\n\t\t\t\t\tif(profile_cover.cover == null){\n\t\t\t\t\t\tvar new_cover = response.data.cover_photo;\n\t\t\t\t\t\tprofile_cover.cover = new_cover;\n\t\t\t\t\t\tprofile_cover.id = data.user_id;\n\t\t\t\t\t\t$scope.random_cover = new_cover;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$scope.random_cover = profile_cover.cover;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t);\n\t\n\n\t$scope.addGroup = function (user){\n\t\t\n\t\tModalService.showModal( {\n\t      \ttemplateUrl: \"app/views/modal/box.php\",\n\t      \tcontroller: \"ModalBoxController\",\n\t      \tinputs : {\n\t      \t\tuser : user\n\t      \t}\n\t    } ).then( function( modal ) {\n\t      modal.close.then( function( result ) {\n\n\t      } );\n\t    } );\n\t}\n}]);\r\nyamba.App\n.controller('ProfileHashtagController', ['$scope','$stateParams','UserServices','FollowServices','profile_cover','FollowerFactory',function($scope,$stateParams,UserServices,FollowServices,profile_cover,FollowerFactory){\n\t$scope.user_data = {};\n\t$scope.current_id = 0;\n\t$scope.random_cover = profile_cover.cover;\n\t$scope.follow = [\n\t\tmy_profile = false,\n\t\tfollow_status = ''\n\t];\n\t$scope.follows = 0;\n\t$scope.title = 'Following';\n\t// $scope.follow_service = new FollowerFactory;\n\n\tUserServices.profile(\n\t\t{\n\t\t\tmethod : 'fetchByUsername',\n    \t\tusername : $stateParams.username\n\t\t},\n\t\tfunction(response){\n\t\t\tvar data = response.data.User;\n\t\t\t\n\t\t\tvar my_profile = false;\n\n\t\t\t$scope.user_data = data;\n\t\t\t$scope.current_id = data.user_id;\n\n\t\t\tif($scope.$parent.App.user.user_id == data.user_id){\n\t\t\t\tmy_profile =  true;\n\t\t\t\t$scope.follow.my_profile = my_profile;\n\t\t\t\t$scope.follow.follow_status = '';\n\t\t\t}\n\t\t\telse{\n\t\t\t\tFollowServices.checkFollowStatus(\n\t\t\t\t\t$scope.user_data.user_id,\n\t\t\t\t\tfunction(response){\n\t\t\t\t\t\tif(profile_cover.id != data.user_id){\n\t\t\t\t\t\t\tprofile_cover.cover = null;\n\t\t\t\t\t\t\tprofile_cover.id = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar response = response.data[ 0 ].Follow;\n                \t\tvar status = FollowServices.followStatus( response.is_followed, response.pending_approval );\n                \t\t$scope.follow.my_profile = my_profile;\n\t\t\t\t\t\t$scope.follow.follow_status = status;\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tUserServices.profile(\n\t\t\t\t{\n\t\t\t\t\tmethod : 'fetchPosts',\n\t\t\t\t    offset : 0,\n\t\t\t\t    user_id : data.user_id\n\t\t\t\t},\n\t\t\t\tfunction(response){\n\t\t\t\t\tif(profile_cover.cover == null){\n\t\t\t\t\t\tvar new_cover = response.data.cover_photo;\n\t\t\t\t\t\tprofile_cover.cover = new_cover;\n\t\t\t\t\t\tprofile_cover.id = data.user_id;\n\t\t\t\t\t\t$scope.random_cover = new_cover;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$scope.random_cover = profile_cover.cover;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t);\n}]);\r\nyamba.App.controller( \"RegisterController\", [ \"$scope\", function( $scope ) {\n\t$scope.$parent.App.title = \"Registration\";\n\n} ] );\r\nyamba.App.controller( \"SearchController\", [ \"$scope\", \"$timeout\", \"$stateParams\", \"SearchServices\",\n\t\t\t\t\t\t\t\t\t\t\tfunction( $scope, $timeout, $stateParams, SearchServices ) {\n\t$scope.$parent.App.title = \"Search | \" + $stateParams.keyword;\n\t$scope.search = {\n\t\thashtags : [],\n\t\tfeeds : [],\n\t\tusers : [],\n\t\tfavos : []\n\t};\n\n\t/************* saerch hashtag ***********/\n\tSearchServices.searchHashtag( {\n\t\tkeyword : $stateParams.keyword\n\t}, function( response ) {\n\t\t$scope.search.hashtags = response.Hashtag;\n\t} );\n\n\n\n\n\t/************* saerch media ***********/\n\tSearchServices.searchFeed( {\n\t\tkeyword : $stateParams.keyword\n\t}, function( response ) {\n\t\t$scope.search.feeds = response.data;\n\t} );\n\n\n\n\n\t/************* saerch user ***********/\n\tSearchServices.searchUser( {\n\t\tkeyword : $stateParams.keyword\n\t}, function( response ) {\n\t\t$scope.search.users = response.data;\n\t} );\n\n\n\n\t/************* saerch collection ***********/\n\tSearchServices.searchFavo( {\n\t\tkeyword : $stateParams.keyword\n\t}, function( response ) {\n\t\t$scope.search.favos = response.data;\n\t} );\n\n\n\n} ] );\r\nyamba.App.controller( \"SettingsController\", [ \"$scope\", \"$timeout\", \"SettingsServices\", \"UserServices\", \"StaticDataServices\",\n\t\t\t\t\t\t\t\t\t\t\tfunction( $scope, $timeout, SettingsServices, UserServices, StaticDataServices ) {\n\t$scope.$parent.App.title = \"Settings\";\n\n\t/***** variables *****/\n\t$scope.current_user = UserServices.getLoginUser();\n\n\tconsole.log( $scope.current_user );\n\n\t$scope.settings = {\n\t\ttimezones : StaticDataServices.getTimezone()\n\t};\n\t\n\t$scope.input_disabled = {\n\t\temail : true,\n\t\tusername : true,\n\t\tdisplayname : true,\n\t\tpassword : true,\n\t\ttimezone : true,\n\t};\n\n\t$scope.pass = {\n\t\tpassword: \"\",\n\t\tnew_password: \"\",\n\t\tconfirm_password: \"\"\n\t};\n\n\t$scope.errors = {\n\t\temail : \"\",\n\t\tusername : \"\",\n\t\tdisplayname : \"\",\n\t\tpassword : \"\",\n\t\ttimezone : \"\",\n\t\tlocale : \"\"\n\t};\n\n\t/***** variables *****/\n\n\n\t$scope.updateGeneralInfo = function( field, name ){\n\t\tvar params = {};\n\t\tparams[ field ] = $scope.current_user[ field ];\n\t\t$scope.errors[ field ] = \"\";\n\n\t\tconsole.log( params[ field ] );\n\n\t\tif( typeof params[ field ] == \"object\" ){\n\t\t\tparams[ field ] = params[ field ][ name ];\n\t\t\t//$scope.current_user[ field ] = params[ field ];\n\t\t}\n\n\t\tSettingsServices.updateGeneralInfo( params, function( response ) {\n\n\t\t\tif( response.success ){\n\t\t\t\t$scope.input_disabled[ field ] = true;\n\t\t\t}\n\t\t\telse{\n\t\t\t\t$scope.errors[ field ] = response.errors[ 0 ];\n\t\t\t}\n\n\t\t} )\n\t}\n\n\n\t$scope.changePassword = function(){\n\n\t\t$scope.errors.password = \"\";\n\n\t\tSettingsServices.updateGeneralInfo( {\n\t\t\tpassword : $scope.pass.password,\n\t\t\tnew_password : $scope.pass.new_password,\n\t\t\tconfirm_password : $scope.pass.confirm_password\n\t\t}, function( response ) {\n\n\t\t\tif( response.success ){\n\t\t\t\t$scope.input_disabled.password = true;\n\t\t\t}\n\t\t\telse{\n\t\t\t\t$scope.errors.password = response.errors[ 0 ];\n\t\t\t}\n\n\t\t} )\n\n\t}\n\n\n\n\t\n} ] );\r\nyamba.App.controller( \"TrendingController\", [ \"$scope\", \"$timeout\", \"$stateParams\", function( $scope, $timeout, $stateParams ) {\n\t$scope.$parent.App.title = \"Trending\";\n\n\t$scope.trending = {\n\t\tfilter : {\n\t\t\tcreation_date : $stateParams.creation_date\n\t\t}\n\t}\n\n\t\n} ] );"]}